<!doctype HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html lang="EN">
<!-- ABAPUPDATE_SET_EXPRESSION -->

<!-- Mirrored from help.sap.com/doc/abapdocu_751_index_htm/7.51/en-US/abapupdate_set_expression.htm by HTTrack Website Copier/3.x [XR&CO'2014], Thu, 20 Jan 2022 17:43:22 GMT -->
<head>
<meta http-equiv="content-type" content="text/html; charset=utf-8">
<meta name="author" content="SAP">
<meta name="description" content="UPDATE dbtab - set_expression">
<title>
UPDATE dbtab - set_expression - ABAP Keyword Documentation
</title>
<link rel="icon" href="ABAPIcon.ico" type="image/ico">
<link rel="shortcut icon" href="ABAPIcon.ico">
<LINK rel="stylesheet" href="abap_docu.css" type="text/css">
<script type="text/JavaScript">
function call_link(linked_file)
{
   if(parent.frames.length>0){
     parent.window.frames["basefrm"].window.location = linked_file;
     parent.window.frames["treeframe"].window.location = "abap_docu_tree92bd.html?file=" + linked_file;}
   else {
     window.location = linked_file;}
}
function urlToClipboard(id){
 try{ var loc = top.location.href;}
 catch(e){ alert( "URL cannnot be determined" ); return; }
 var field = document.getElementById(id);
 field.focus();
 if ( loc.search( ".htm" ) == -1 && loc.search( ".HTM" ) == -1  ){ loc = loc + "index.htm"; }
 if (   loc.search( "index.html" ) != -1
     || loc.search( "INDEX-2.html" ) != -1 ){
   var off = loc.search( "file=" );
   if ( off == -1  ){
     field.value = loc + "?file=abapupdate_set_expression.htm"; }
   else {
     field.value = loc.substring( 0, off ) + "file=abapupdate_set_expression.htm";
   }
 }
 else {
    field.value = loc; }
 field.setSelectionRange(0, field.value.length);
 var r = confirm( "Copy URL to clipboard?\n\n" + field.value + "\n\nCopy to clipboard does not work in all browsers." );
 if (r == true) {
   try{
     document.execCommand("copy");
   }
     catch(e){ alert( "URL could not be copied to clipboard" ); }
 }
 window.scrollTo(0,0);
}
</script>
</head>
<body>
<div class="all">
<p class="copyright">SAP NetWeaver AS ABAP Release 751, &copy;Copyright 2017 SAP AG. All rights reserved.
&nbsp;<input type="button" value="URL" style="font-size:8px; width:26px; height:16px; padding:0"
 onclick="urlToClipboard('url')" title="Copy URL to Clipboard" >
</p>
<span class="path">
<a href="javascript:call_link('abenabap.html')" class="blue">ABAP - Keyword Documentation</a>&nbsp;&rarr;&nbsp;
<a href="javascript:call_link('abenabap_reference.html')" class="blue">ABAP - Reference</a>&nbsp;&rarr;&nbsp;
<a href="javascript:call_link('abenabap_language_external_data.html')" class="blue">Processing External Data</a>&nbsp;&rarr;&nbsp;
<a href="javascript:call_link('abenabap_sql.html')" class="blue">ABAP Database Accesses</a>&nbsp;&rarr;&nbsp;
<a href="javascript:call_link('abenopensql.html')" class="blue">Open SQL</a>&nbsp;&rarr;&nbsp;
<a href="javascript:call_link('abenopen_sql_writing.html')" class="blue">Open SQL - Write Accesses</a>&nbsp;&rarr;&nbsp;
<a href="javascript:call_link('abapupdate.html')" class="blue">UPDATE dbtab</a>&nbsp;&rarr;&nbsp;
<a href="javascript:call_link('abapupdate_source.html')" class="blue">UPDATE dbtab - source</a>&nbsp;&rarr;&nbsp;
</span>
<p><span class="h1">
UPDATE dbtab - set_expression <br><br>
</span></p>
<P>
<a href="javascript:call_link('abapupdate_shortref.html')" class="blue">Quick Reference</a> <br><br>
</P>
<p><span class="h2">
<span class="bold">Syntax</span>
</span></p>
<P>
<span class="qtext">... <i class=bn>{</i><a href="javascript:call_link('abenopen_sql_columns.html')" class="blue">col</a> = f<i class=bn>}</i> <br>
&nbsp;&nbsp;<i class=bn>|</i> <i class=bn>{</i><a href="javascript:call_link('abenopen_sql_columns.html')" class="blue">col</a> = <a href="javascript:call_link('abenopen_sql_columns.html')" class="blue">col</a> + f<i class=bn>}</i> <br>
&nbsp;&nbsp;<i class=bn>|</i> <i class=bn>{</i><a href="javascript:call_link('abenopen_sql_columns.html')" class="blue">col</a> = <a href="javascript:call_link('abenopen_sql_columns.html')" class="blue">col</a> - f<i class=bn>}</i> <br>
&nbsp;&nbsp;<i class=bn>|</i> (expr_syntax) ...</span> <br><br>
</P>
<p><span class="h2">
Variants:
</span></p>
<P>
   <A HREF="#!ABAP_VARIANT_1@1@" class="blue"> 1. <span class="qtext">... col = f</span> </A> <br><br><A HREF="#!ABAP_VARIANT_2@2@" class="blue"> 2. <span class="qtext">... col = col + f</span> </A> <br>
<br><A HREF="#!ABAP_VARIANT_3@3@" class="blue"> 3. <span class="qtext">... col = col - f</span> </A> <br><br><A HREF="#!ABAP_VARIANT_4@4@" class="blue"> 4. <span class="qtext">... (expr_syntax)</span> </A> <br><br>
</P>
<p><span class="h4">
Effect
</span></p>
<P>
Change expressions for the addition <span class="qtext">SET</span> of the statement <span class="qtext">UPDATE</span>.
These change expressions in the comma-separated list can be combined in any way required after <a href="javascript:call_link('abapupdate_source.html')" class="blue"><span class="qtext">SET</span></a>. <br><br>
</P>
<p><span class="h4">
Notes
</span></p>
<ul class="disc">
<li>
If a column <span class="qtext">col</span> appears in multiple change expressions, the last change expression applies.
<br><br></li>
<li>
In the <a href="javascript:call_link('abenopensql_strict_mode_750.html')" class="blue">strict mode from Release 7.50</a>, a column can only appear in a single update expression. <br><br>
<br></li>
</ul>
<A NAME="@@=@@UPDATE dbtab@@"></A>
<p><span class="h2">
<A NAME="!ABAP_VARIANT_1@1@"></A> <span class="bold">Variant 1</span>
</span></p>
<P>
<span class="qtext">... col = f</span> <br><br><br><!-- /A -->
</P>
<p><span class="h4">
Effect
</span></p>
<P>
Assigning a value. Columns of the database table or view <span class="qtext">dbtab</span> specified
in <a href="javascript:call_link('abapupdate_target.html')" class="blue"><span class="qtext">target</span></a>
can be specified for <a href="javascript:call_link('abenopen_sql_columns.html')" class="blue"><span class="qtext">col</span></a>. For <span class="qtext">f</span>, a literal, a
<a href="javascript:call_link('abenopen_sql_host_variables.html')" class="blue">host variable</a> prefixed by an escape character <span class="qtext">@</span>, a
<a href="javascript:call_link('abenopen_sql_host_expressions.html')" class="blue">host expression</a>, or a column name <a href="javascript:call_link('abenopen_sql_columns.html')" class="blue">
<span class="qtext">dbtab~comp</span></a> of a different column in the database table can be used.
</P>
<P>
The statement <span class="qtext">UPDATE</span> assigns the content of <span class="qtext">f</span>
to the columns <span class="qtext">col</span> in all the rows defined by the <span class="qtext">WHERE</span> condition. If the data types are not
<a href="javascript:call_link('abencompatible_glosry.html')" class="grey" title="Glossary Entry">compatible</a>, they are converted as follows:
</P>
<ul class="disc">
<li>
When assigning a right side that is not a reference variable for a
<a href="javascript:call_link('abenlob_handle_glosry.html')" class="grey" title="Glossary Entry">LOB handle</a>, the content is converted, if required, to the
<a href="javascript:call_link('abenddic_builtin_types.html')" class="blue">ABAP data type</a> appropriate to the data type of the column (and in accordance with the
<a href="javascript:call_link('abenconversion_elementary.html')" class="blue">conversion rules</a>). Any errors in the conversion
raise the appropriate non-handleable exception. The content of <span class="qtext">f</span> should match the data type of the column in accordance with the rules for
<a href="javascript:call_link('abenlossless_assignment_glosry.html')" class="grey" title="Glossary Entry">lossless assignments</a>. This is checked by the
<a href="javascript:call_link('abenopensql_strict_modes.html')" class="blue">strict modes</a> of the syntax check from Release 7.40, SP08 and can raise an exception.
<br><br></li>
<li>
When assigning a data object that is a reference variable for a
<a href="javascript:call_link('abenlob_handle_glosry.html')" class="grey" title="Glossary Entry">LOB handle</a>, the column <span class="qtext">col</span> must be a
<a href="javascript:call_link('abenlob_glosry.html')" class="grey" title="Glossary Entry">LOB</a> with an appropriate type. If
the reference has a writer stream type, a writer stream is created. In this case of a type for a locator: this must exist and is used as a source. For details, see
<a href="javascript:call_link('abeninsert_update_modify_lob.html')" class="blue">LOB handles</a>.
<br><br></li>
<li>
When assigning a different column, the content is converted, if required, in the database system. Whether
a conversion is possible and the conversion rules are specific to the database system. Any errors in the conversion raise the handleable exception CX_SY_OPEN_SQL_DB.
<br></li>
</ul>
<P>
In the assignment, the assigned value must fit in the value range of the column. Otherwise the handleable exception CX_SY_OPEN_SQL_DB is raised. This applies in particular for:
</P>
<ul class="disc">
<li>
Assignments to numeric columns
<br><br></li>
<li>
Assignments to columns of the type SSTRING, STRING, or RAWSTRING. The assigned content must not be longer
than the maximum length of the columns in the database structure. This length can be determined using the predefined function <a href="javascript:call_link('abenlength_functions.html')" class="blue"><span class="qtext">dbmaxlen</span></a>.
<br></li>
</ul>
<P>
If a column is specified for <span class="qtext">f</span>, changes to this column that are made in the same <span class="qtext">UPDATE</span> statement are ignored during the assignment.
</P>
<p><span class="h4">
Notes
</span></p>
<ul class="disc">
<li>
When a <a href="javascript:call_link('abenopen_sql_host_expressions.html')" class="blue">host expression</a> is specified on the right side, the syntax check is performed in a
<a href="javascript:call_link('abenopensql_strict_mode_750.html')" class="blue">strict mode</a>, which handles the statement more strictly than the regular syntax check.
<br><br></li>
<li>
No <a href="javascript:call_link('abenenumerated_variable_glosry.html')" class="grey" title="Glossary Entry">enumerated objects</a>, however, can be specified for <span class="qtext">f</span>.
<br><br></li>
<li>
Host variables without the escape character <span class="qtext">@</span> are
<a href="javascript:call_link('abenopen_sql_hostvar_obsolete.html')" class="blue">obsolete</a>. The escape character <span class="qtext">@</span> must be specified in the
<a href="javascript:call_link('abenopensql_strict_modes.html')" class="blue">strict modes</a> of the syntax check from Release 7.40, SP05. <br><br>
<br></li>
</ul>
<A NAME="@@+@@UPDATE dbtab@@"></A>
<p><span class="h2">
<A NAME="!ABAP_VARIANT_2@2@"></A> <span class="bold">Variant 2</span>
</span></p>
<P>
<span class="qtext">... col = col + f</span> <br><br><br><!-- /A -->
</P>
<p><span class="h4">
Effect
</span></p>
<P>
Addition of a value. For <a href="javascript:call_link('abenopen_sql_columns.html')" class="blue"><span class="qtext">col</span></a>
and <span class="qtext">f</span>, the same applies as for the assignment of a value. However, <span class="qtext">
col</span> must have a numeric data type. <span class="qtext">col</span> must be specified either with
the prefix <span class="qtext">dbtab~</span> on both sides or without it on both sides.  The data types DF16_RAW and DF34_RAW and the obsolete types DF16_SCL and DF34_SCL are not allowed.
</P>
<P>
The statement <span class="qtext">UPDATE</span> adds the value of <span class="qtext">f</span> to the
content of the column <span class="qtext">col</span>, in all the rows defined by the <span class="qtext">WHERE</span> condition. Otherwise, the same rules apply as for the assignment of a value. <br><br>
</P>
<A NAME="@@-@@UPDATE dbtab@@"></A>
<p><span class="h2">
<A NAME="!ABAP_VARIANT_3@3@"></A> <span class="bold">Variant 3</span>
</span></p>
<P>
<span class="qtext">... col = col - f</span> <br><br><br><!-- /A -->
</P>
<p><span class="h4">
Effect
</span></p>
<P>
Subtraction of a value. For <a href="javascript:call_link('abenopen_sql_columns.html')" class="blue"><span class="qtext">col</span></a>
and <a href="javascript:call_link('abenopen_sql_columns.html')" class="blue"><span class="qtext">f</span></a>, the same applies
as for the assignment of a value. However, <a href="javascript:call_link('abenopen_sql_columns.html')" class="blue"><span class="qtext">col</span></a>
must have a numeric data type. <span class="qtext">col</span> must be specified either with the prefix
<span class="qtext">dbtab~</span> on both sides or without it on both sides. The data types DF16_RAW and DF34_RAW and the obsolete types DF16_SCL and DF34_SCL are not allowed.
</P>
<P>
The statement <span class="qtext">UPDATE</span> subtracts the value of <span class="qtext">f</span>
from the content of the column <span class="qtext">col</span>, in all the rows defined by the <span class="qtext">WHERE</span> condition. Otherwise, the same rules apply as for the assignment of a value. <br><br>
</P>
<p><span class="h2">
<A NAME="!ABAP_VARIANT_4@4@"></A> <span class="bold">Variant 4</span>
</span></p>
<P>
<span class="qtext">... (expr_syntax)</span> <br><br><br><!-- /A -->
</P>
<p><span class="h4">
Effect
</span></p>
<P>
Dynamic specification of change expressions. A change expression can be specified as a parenthesized
data object <span class="qtext">expr_syntax</span> that, when the statement is executed, either contains
the syntax of one or more static change expressions (with the exception of host expressions) or is initial. The data object <span class="qtext">expr_syntax</span> can be a character-like data object or a
<a href="javascript:call_link('abenstandard_table_glosry.html')" class="grey" title="Glossary Entry">standard table</a> without
<a href="javascript:call_link('abensecondary_table_key_glosry.html')" class="grey" title="Glossary Entry">secondary table keys</a>
and with a character-like data object. The syntax in <span class="qtext">expr_syntax</span> is not case-sensitive,
as in ABAP Editor. When an internal table is specified, the syntax can be distributed across multiple rows.
</P>
<P>
If <span class="qtext">expr_syntax</span> is <span class="qtext">initial</span> when the statement is executed, the change expression is ignored. <br><br>
</P>
<p><span class="h4">
Security Note
</span></p>
<p>

</p>
<p>
If used wrongly, dynamic programming techniques can present a serious security risk. Any dynamic content
that is passed to a program from the outside must be checked thoroughly or escaped before being used
in dynamic statements. This can be done using the system class <span class="lnkgrey">CL_ABAP_DYN_PRG</span> or the predefined function <a href="javascript:call_link('abenescape_functions.html')" class="blue"><span class="qtext">escape</span></a>. See
<a href="javascript:call_link('abensql_inj_dyn_tokens_scrty.html')" class="blue">SQL Injections Using Dynamic Tokens</a>.
</p>
<p><span class="h4">
Note
</span></p>
<P>
If <span class="qtext">expr_syntax</span> is an internal table with a
<a href="javascript:call_link('abenheader_line_glosry.html')" class="grey" title="Glossary Entry">header line</a>, the
<a href="javascript:call_link('abentable_body_glosry.html')" class="grey" title="Glossary Entry">table body</a> is evaluated and not the header line.
</P>
<p><span class="h4">
Executable Example
</span></p>
<P>
<a href="javascript:call_link('abenupdate_set_abexa.html')" class="blue"><span class="qtext">UPDATE</span>, Use of <span class="qtext">SET</span></a>
</P>
<br>
<br>
<!-- POSTFIX --><span class="h4">Continue</span><br>
<img src="exa.gif" alt="Example" title="Example">
<a href="javascript:call_link('abenupdate_set_abexa.html')" class="blue">UPDATE, Use of SET</a><br>
<br>
<br>
</DIV>
<fieldset style="opacity:0">
<input id="url" type="text" />
</fieldset>
</BODY>

<!-- Mirrored from help.sap.com/doc/abapdocu_751_index_htm/7.51/en-US/abapupdate_set_expression.htm by HTTrack Website Copier/3.x [XR&CO'2014], Thu, 20 Jan 2022 17:43:22 GMT -->
</html>
