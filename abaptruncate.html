<!doctype HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html lang="EN">
<!-- ABAPTRUNCATE -->

<!-- Mirrored from help.sap.com/doc/abapdocu_751_index_htm/7.51/en-US/abaptruncate.htm by HTTrack Website Copier/3.x [XR&CO'2014], Thu, 20 Jan 2022 17:44:40 GMT -->
<head>
<meta http-equiv="content-type" content="text/html; charset=utf-8">
<meta name="author" content="SAP">
<meta name="description" content="TRUNCATE DATASET">
<meta name="keywords" content="ABAP, TRUNCATE DATASET">
<title>
TRUNCATE DATASET - ABAP Keyword Documentation
</title>
<link rel="icon" href="ABAPIcon.ico" type="image/ico">
<link rel="shortcut icon" href="ABAPIcon.ico">
<LINK rel="stylesheet" href="abap_docu.css" type="text/css">
<script type="text/JavaScript">
function call_link(linked_file)
{
   if(parent.frames.length>0){
     parent.window.frames["basefrm"].window.location = linked_file;
     parent.window.frames["treeframe"].window.location = "abap_docu_tree92bd.html?file=" + linked_file;}
   else {
     window.location = linked_file;}
}
function urlToClipboard(id){
 try{ var loc = top.location.href;}
 catch(e){ alert( "URL cannnot be determined" ); return; }
 var field = document.getElementById(id);
 field.focus();
 if ( loc.search( ".htm" ) == -1 && loc.search( ".HTM" ) == -1  ){ loc = loc + "index.htm"; }
 if (   loc.search( "index.html" ) != -1
     || loc.search( "INDEX-2.html" ) != -1 ){
   var off = loc.search( "file=" );
   if ( off == -1  ){
     field.value = loc + "?file=abaptruncate.htm"; }
   else {
     field.value = loc.substring( 0, off ) + "file=abaptruncate.htm";
   }
 }
 else {
    field.value = loc; }
 field.setSelectionRange(0, field.value.length);
 var r = confirm( "Copy URL to clipboard?\n\n" + field.value + "\n\nCopy to clipboard does not work in all browsers." );
 if (r == true) {
   try{
     document.execCommand("copy");
   }
     catch(e){ alert( "URL could not be copied to clipboard" ); }
 }
 window.scrollTo(0,0);
}
</script>
</head>
<body>
<div class="all">
<p class="copyright">SAP NetWeaver AS ABAP Release 751, &copy;Copyright 2017 SAP AG. All rights reserved.
&nbsp;<input type="button" value="URL" style="font-size:8px; width:26px; height:16px; padding:0"
 onclick="urlToClipboard('url')" title="Copy URL to Clipboard" >
</p>
<span class="path">
<a href="javascript:call_link('abenabap.html')" class="blue">ABAP - Keyword Documentation</a>&nbsp;&rarr;&nbsp;
<a href="javascript:call_link('abenabap_reference.html')" class="blue">ABAP - Reference</a>&nbsp;&rarr;&nbsp;
<a href="javascript:call_link('abenabap_language_external_data.html')" class="blue">Processing External Data</a>&nbsp;&rarr;&nbsp;
<a href="javascript:call_link('abenabap_language_files.html')" class="blue">ABAP File Interface</a>&nbsp;&rarr;&nbsp;
<a href="javascript:call_link('abenfile_interface_statements.html')" class="blue">Statements for the ABAP File Interface</a>&nbsp;&rarr;&nbsp;
</span>
<A NAME="@@TRUNCATE DATASET@@!ABAP_STATEMENT!@@"></A>
<A NAME="@@AT@@TRUNCATE DATASET@@"></A>
<p><span class="h1">
TRUNCATE DATASET <br><br>
</span></p>
<P>
<a href="javascript:call_link('abaptruncate_dataset_shortref.html')" class="blue">Quick Reference</a> <br><br>
</P>
<p><span class="h2">
<span class="bold">Syntax</span>
</span></p>
<P>
<span class="qtext">TRUNCATE DATASET dset AT <i class=bn>{</i>CURRENT POSITION<i class=bn>}</i><i class=bn>|</i><i class=bn>{</i>POSITION pos<i class=bn>}</i>.</span> <br><br>
</P>
<p><span class="h3">
Extras:
</span></p>
<P>
   <A HREF="#!ABAP_ADDITION_1@1@" class="blue"> 1. <span class="qtext">... CURRENT POSITION</span> </A> <br><br><A HREF="#!ABAP_ADDITION_2@2@" class="blue"> 2. <span class="qtext">... POSITION pos</span> </A> <br><br>
</P>
<p><span class="h4">
Effect
</span></p>
<P>
This statement sets the end of file of the file specified in <span class="qtext">dset</span> to the
value specified after <span class="qtext">AT</span> and can thus change the size of the file. When shortened,
the file is truncated after the new end of file; when extended, the file is padded with hexadecimal 0 from the previous end of file to the new end of file.
</P>
<P>
<span class="qtext">dset</span> expects a character-like data object containing the
<a href="javascript:call_link('abenphysical_filename_glosry.html')" class="grey" title="Glossary Entry">physical name</a> of
the file. The file must be opened for writing, appending, or changing, and not contain the addition
<a href="javascript:call_link('abapopen_dataset_os_addition.html')" class="blue"><span class="qtext">FILTER</span></a> of the
statement <a href="javascript:call_link('abapopen_dataset.html')" class="blue"><span class="qtext">OPEN DATASET</span></a>; otherwise a non-handleable exception is raised. <br><br>
</P>
<P>
<span class="bold">Return Value</span><br>
</P>
<P>
The statement <span class="qtext">TRUNCATE</span> always sets <span class="qtext">sy-subrc</span> to the value 0 or raises an exception. <br><br>
</P>
<p><span class="h4">
Note
</span></p>
<P>
The statement <span class="qtext">TRUNCATE</span> does not change the position of the current file pointer.
If the file is open for appending, the file pointer is only set directly before the next write to the end of file. <br><br>
</P>
<A NAME="@@CURRENT POSITION@@TRUNCATE DATASET@@"></A>
<p><span class="h3">
<A NAME="!ABAP_ADDITION_1@1@"></A> <span class="bold">Addition 1</span>
</span></p>
<P>
<span class="qtext">... CURRENT POSITION</span>   <br><!-- /A -->
</P>
<p><span class="h4">
Effect
</span></p>
<P>
The addition <span class="qtext">CURRENT POSITION</span> sets the end of file to the current <a href="javascript:call_link('abenfile_pointer_glosry.html')" class="grey" title="Glossary Entry">file pointer</a>. <br><br>
</P>
<A NAME="@@POSITION@@TRUNCATE DATASET@@"></A>
<p><span class="h3">
<A NAME="!ABAP_ADDITION_2@2@"></A> <span class="bold">Addition 2</span>
</span></p>
<P>
<span class="qtext">... POSITION pos</span>   <br><!-- /A -->
</P>
<p><span class="h4">
Effect
</span></p>
<P>
The addition <span class="qtext">POSITION pos</span> sets the end of file to the position specified
in <span class="qtext">pos</span>. <span class="qtext">pos</span> expects a numeric data object whose
contents cannot be negative. The positioning is specified in bytes, where the start of file is synonymous with the position 0. <br><br>
</P>
<p><span class="h4">
Example
</span></p>
<P>
After the first <span class="qtext">TRUNCATE</span> statement, the file contains the value <span class="qtext400">"FF"</span>, and after the second, the value <span class="qtext400">"FF00"</span>.
</P>
<p class="qtextml1">
<span class="qtext">
DATA: name TYPE string VALUE `test.dat`, <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;hex&nbsp;&nbsp;TYPE xstring. <br>
 <br>hex = 'FFFF'. <br> <br>OPEN DATASET name FOR OUTPUT IN BINARY MODE. <br> <br>TRANSFER hex TO name. <br>
SET DATASET name POSITION 0. <br>READ DATASET name INTO hex. <br> <br>TRUNCATE DATASET name AT POSITION 1. <br>
SET DATASET name POSITION 0. <br>READ DATASET name INTO hex. <br> <br>TRUNCATE DATASET name AT POSITION 2. <br>SET DATASET name POSITION 0. <br>READ DATASET name INTO hex. <br> <br>CLOSE DATASET name. <br><br>
</span>
</p>
<p><span class="h4">
<a href="javascript:call_link('abenabap_language_exceptions.html')" class="blue">Exceptions</a>
</span></p>
<P>
<span class="bold">Handleable Exceptions</span>
</P>
<P>
<span class="lnkgrey">CX_SY_FILE_OPEN</span>
</P>
<ul class="disc">
<li>
<span class="italic">Cause:</span> The file is not open. <br><span class="italic">Runtime error:</span> <span class="qtext">DATASET_NOT_OPEN</span>
<br><br></li>
<li>
<span class="italic">Cause:</span> The file is only open for reading. <br><span class="italic">Runtime error:</span> <span class="qtext">DATASET_READ_ONLY</span>
<br></li>
</ul>
<P>
<span class="lnkgrey">CX_SY_FILE_AUTHORITY</span>
</P>
<ul class="disc">
<li>
<span class="italic">Cause:</span> No authorization for access to file <br><span class="italic">Runtime error:</span> <span class="qtext">OPEN_DATASET_NO_AUTHORITY</span>
<br></li>
</ul>
<P>
<span class="lnkgrey">CX_SY_FILE_POSITION</span>
</P>
<ul class="disc">
<li>
<span class="italic">Cause:</span> Invalid position specified. <br>Runtime error: <span class="qtext">DATASET_OFFSET_TOO_LARGE</span>
<br></li>
</ul>
<P>
<span class="lnkgrey">CX_SY_FILE_TRUNCATE</span>
</P>
<ul class="disc">
<li>
<span class="italic">Cause:</span> The operating system could not change the size of the file. <br><span class="italic">Runtime error:</span> <span class="qtext">DATASET_TRUNCATE_ERROR</span>
<br><br></li>
<li>
<span class="italic">Cause:</span> An attempt was made to change the size of a file opened using the addition <span class="qtext">FILTER</span>. <br>
<span class="italic">Runtime error:</span> <span class="qtext">DATASET_TRUNCATE_ERROR</span> <br><br>
<br></li>
</ul>
<P>
<span class="bold">Non-Handleable Exceptions</span>
</P>
<ul class="disc">
<li>
<span class="italic">Cause:</span> Internal error when emptying the file buffer, determining the current file position, or restoring the file when rolling in the
<a href="javascript:call_link('abeninternal_session_glosry.html')" class="grey" title="Glossary Entry">internal session</a>. <br><span class="italic">Runtime error:</span> <span class="qtext">DATASET_TRUNCATE_ERROR</span> <br><br>
<br></li>
</ul>
<br>
<br>
<br>
<br>
</DIV>
<fieldset style="opacity:0">
<input id="url" type="text" />
</fieldset>
</BODY>

<!-- Mirrored from help.sap.com/doc/abapdocu_751_index_htm/7.51/en-US/abaptruncate.htm by HTTrack Website Copier/3.x [XR&CO'2014], Thu, 20 Jan 2022 17:44:41 GMT -->
</html>
