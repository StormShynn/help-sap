<!doctype HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html lang="EN">
<!-- ABENCDS_F1_ANNOTATE_VIEW -->

<!-- Mirrored from help.sap.com/doc/abapdocu_751_index_htm/7.51/en-US/abencds_f1_annotate_view.htm by HTTrack Website Copier/3.x [XR&CO'2014], Thu, 20 Jan 2022 17:25:26 GMT -->
<head>
<meta http-equiv="content-type" content="text/html; charset=utf-8">
<meta name="author" content="SAP">
<meta name="description" content="ABAP CDS - ANNOTATE VIEW">
<meta name="keywords" content="ABAP, CDS, ANNOTATE VIEW">
<title>
ABAP CDS - ANNOTATE VIEW - ABAP Keyword Documentation
</title>
<link rel="icon" href="ABAPIcon.ico" type="image/ico">
<link rel="shortcut icon" href="ABAPIcon.ico">
<LINK rel="stylesheet" href="abap_docu.css" type="text/css">
<script type="text/JavaScript">
function call_link(linked_file)
{
   if(parent.frames.length>0){
     parent.window.frames["basefrm"].window.location = linked_file;
     parent.window.frames["treeframe"].window.location = "abap_docu_tree92bd.html?file=" + linked_file;}
   else {
     window.location = linked_file;}
}
function urlToClipboard(id){
 try{ var loc = top.location.href;}
 catch(e){ alert( "URL cannnot be determined" ); return; }
 var field = document.getElementById(id);
 field.focus();
 if ( loc.search( ".htm" ) == -1 && loc.search( ".HTM" ) == -1  ){ loc = loc + "index.htm"; }
 if (   loc.search( "index.html" ) != -1
     || loc.search( "INDEX-2.html" ) != -1 ){
   var off = loc.search( "file=" );
   if ( off == -1  ){
     field.value = loc + "?file=abencds_f1_annotate_view.htm"; }
   else {
     field.value = loc.substring( 0, off ) + "file=abencds_f1_annotate_view.htm";
   }
 }
 else {
    field.value = loc; }
 field.setSelectionRange(0, field.value.length);
 var r = confirm( "Copy URL to clipboard?\n\n" + field.value + "\n\nCopy to clipboard does not work in all browsers." );
 if (r == true) {
   try{
     document.execCommand("copy");
   }
     catch(e){ alert( "URL could not be copied to clipboard" ); }
 }
 window.scrollTo(0,0);
}
</script>
</head>
<body>
<div class="all">
<p class="copyright">SAP NetWeaver AS ABAP Release 751, &copy;Copyright 2017 SAP AG. All rights reserved.
&nbsp;<input type="button" value="URL" style="font-size:8px; width:26px; height:16px; padding:0"
 onclick="urlToClipboard('url')" title="Copy URL to Clipboard" >
</p>
<span class="path">
<a href="javascript:call_link('abenabap.html')" class="blue">ABAP - Keyword Documentation</a>&nbsp;&rarr;&nbsp;
<a href="javascript:call_link('abenabap_dictionary.html')" class="blue">ABAP - Dictionary</a>&nbsp;&rarr;&nbsp;
<a href="javascript:call_link('abencds.html')" class="blue">ABAP CDS in ABAP Dictionary</a>&nbsp;&rarr;&nbsp;
<a href="javascript:call_link('abencds_meta_data_extensions.html')" class="blue">ABAP CDS Metadata Extensions</a>&nbsp;&rarr;&nbsp;
<a href="javascript:call_link('abencds_f1_ddlx_syntax.html')" class="blue">ABAP CDS - DDL for Metadata Extensions</a>&nbsp;&rarr;&nbsp;
</span>
<A NAME="@@ANNOTATE VIEW@@!ABAP_CDS_STATEMENT!@@"></A>
<A NAME="@@WITH@@!ABAP_CDS_ANNOTATE_VIEW!@@"></A>
<p><span class="h1">
ABAP CDS - ANNOTATE VIEW
</span></p>
<A name="@@ITOC@@ABENCDS_F1_ANNOTATE_VIEW_1"></A>
<p><span class="h2">
Syntax
</span></p>
<p>
<span class="qtext400"><a href="javascript:call_link('abencds_f1_metadata_ext_annos.html')" class="blue">@Metadata.layer: #CORE<i
class=bn>|</i>#LOCALIZATION<i class=bn>|</i>#INDUSTRY<i class=bn>|</i>#PARTNER<i class=bn>|</i>#CUSTOMER</a> <br>
 <br><i class=bn>[</i><a href="javascript:call_link('abencds_f1_view_entity_annotations.html')" class="blue">@view_annot1</a><i class=bn>]</i> <br>
<i class=bn>[</i><a href="javascript:call_link('abencds_f1_view_entity_annotations.html')" class="blue">@view_annot2</a><i class=bn>]</i> <br>
... <br> <br>ANNOTATE VIEW cds_entity WITH <br>&nbsp;&nbsp;<i class=bn>[</i>VARIANT variant<i class=bn>]</i> <br>
&nbsp;&nbsp;<i class=bn>[</i><a href="javascript:call_link('abencds_f1_annotate_view_para_list.html')" class="blue">parameter_list</a><i class=bn>]</i> <br>
&nbsp;&nbsp;{ <i class=bn>[</i><a href="javascript:call_link('abencds_f1_annotate_view_sele_list.html')" class="blue">element_list</a><i class=bn>]</i> }<i class=bn>[</i>;<i class=bn>]</i></span> <br><br>
</p>
<p><span class="h3">
Addition:
</span></p>
<P>
   <A HREF="#!ABAP_ONE_ADD@1@" class="blue"> <span class="qtext">... VARIANT variant</span> </A> <br><br>
</P>
<p><span class="h4">
Effect
</span></p>
<p>
Defines a <a href="javascript:call_link('abencds_metadata_extension_glosry.html')" class="grey" title="Glossary Entry">CDS metadata extension</a> in (MDE for short) in a
<a href="javascript:call_link('abencds_source_code_glosry.html')" class="grey" title="Glossary Entry">CDS source code</a> for a
<a href="javascript:call_link('abencds_view_glosry.html')" class="grey" title="Glossary Entry">CDS view</a>. The CDS metadata extension add metadata to the CDS view in the form of
<a href="javascript:call_link('abencds_annotation_glosry.html')" class="grey" title="Glossary Entry">CDS annotations</a>. The view to be extended must exist, be specified using the name of its
<a href="javascript:call_link('abencds_entity_glosry.html')" class="grey" title="Glossary Entry">CDS entity</a> <span class="qtext400">cds_entity</span>
and contains the annotation <a href="javascript:call_link('abencds_f1_view_entity_annotations.html')" class="blue"><span class="qtext400">Metadata.allowExtensions</span></a>
with the default value <span class="qtext400">true</span> in its source code. There can be several CDS metadata extensions for one CDS entity.
</p>
<p>
Before the <span class="qtext400">ANNOTATE VIEW</span> statement, the <a href="javascript:call_link('abencds_f1_metadata_ext_annos.html')" class="blue">
<span class="qtext400">@Metadata.layer</span></a> annotation must be specified with one of the displayed enumeration values, in order to define the layer of the metadata extension. In the
<a href="javascript:call_link('abencds_meta_data_extension_eval.html')" class="blue">analysis of metadata extensions</a>, the
layer determines the priority of the metadata if there are multiple metadata extensions for the same CDS entity, which is not linked or is linked to the same
<a href="javascript:call_link('abencds_variant_glosry.html')" class="grey" title="Glossary Entry">CDS variant</a>. The enumerated
values are displayed with the lowest priority ones on the left and the highest priority on the right.
<span class="qtext400">#CORE</span> therefore has the lowest, and <span class="qtext400">#CUSTOMER</span>
the highest priority. If multiple CDS metadata extensions with none or the same CDS variant are assigned
to the same layer, a syntax check warning is issued for annotations specified more than one, and the system uses the annotation of the first metadata extension found.
</p>
<p>
The annotations added to the extended view are defined as follows. A metadata extension must contain at least one of these.
</p>
<ul class="disc">
<li>Annotations listed before statement <span class="qtext400">ANNOTATE VIEW</span> must be in the
<a href="javascript:call_link('abencds_annotations_scopes.html')" class="blue">scope</a> of the
<a href="javascript:call_link('abencds_f1_view_entity_annotations.html')" class="blue">view annotations</a> of the permitted
<a href="javascript:call_link('abencds_annotations_sap.html')" class="blue">SAP annotations</a>. They are added to the view annotations of the extended view.</li>
</ul>
<ul class="disc">
<li><a href="javascript:call_link('abencds_f1_annotate_view_para_list.html')" class="blue"><span class="qtext400">parameter_list</span></a> is used to specify annotations for the parameters of the extended view.</li>
</ul>
<ul class="disc">
<li><a href="javascript:call_link('abencds_f1_annotate_view_sele_list.html')" class="blue"><span class="qtext400">element_list</span></a>
is used specify annotations for the elements of <span class="qtext400">SELECT</span> list of the extended view.</li>
</ul>
<p>
Currently it is only possible to specify the following annotations:
</p>
<ul class="disc">
<li> <a href="javascript:call_link('abencds_annotations_abap.html')" class="blue"> <span class="qtext400">@EndUserText</span></a> Annotations</li>
</ul>
<ul class="disc">
<li><a href="javascript:call_link('abencds_annotations_frmwrk.html')" class="blue"> <span class="qtext400">@Consumption</span></a> Annotations</li>
</ul>
<ul class="disc">
<li><a href="javascript:call_link('abencds_annotations_frmwrk.html')" class="blue"><span class="qtext400">@UI</span></a> Annotations</li>
</ul>
<p>
All other annotations lead to syntax errors.
</p>
<p>
These annotation of a metadata extensions are taken into account during the
<a href="javascript:call_link('abencds_annotations_analysis.html')" class="blue">evaluation of annotations</a> with the methods
of the class <span class="lnkgrey">CL_DD_DDL_ANNOTATION_SERVICE</span> except for GET_DIRECT_ANNOS_, in accordance with the layers defined by the annotation <span class="qtext400">@Metadata.layer</span> and in accordance with the used
<a href="javascript:call_link('abencds_variant_glosry.html')" class="grey" title="Glossary Entry">CDS variants</a>. Here the
annotations of a metadata extension always have a higher priority than the annotations defined in the
source code of the CDS entity. These are only taken into account if they are not overridden by a corresponding annotation of a metadata extension. For the exact description of the evaluation, see section
<a href="javascript:call_link('abencds_meta_data_extension_eval.html')" class="blue">evaluation of metadata extensions</a>.
</p>
<p><span class="h4">
Notes
</span></p>
<ul class="disc">
<li>Unlike the specification of annotations in the source code of the extended CDS entity, it is not possible to have any arbitrary annotations in metadata extensions; it is only possible to have
<a href="javascript:call_link('abencds_annotations_sap.html')" class="blue">SAP annotations</a>. The syntax check for a metadata extension checks:</li>
</ul>
<ul class="circlem2">
<li>the name of an annotation</li>
</ul>
<ul class="circlem2">
<li>the validity of the <a href="javascript:call_link('abencds_annotations_syntax_value.html')" class="blue">value specifications</a>; in other words, the type and (for enumeration values) the value of the specified values</li>
</ul>
<ul class="circlem2">
<li>the <a href="javascript:call_link('abencds_annotations_scopes.html')" class="blue">scope</a></li>
</ul>
<ul class="disc">
<li><a href="javascript:call_link('abencds_annotations_sap.html')" class="blue">SAP annotations</a>, which are specified as
<a href="javascript:call_link('abencds_annotations_syntax_array.html')" class="blue">annotation arrays</a>, can only be listed
with square brackets. A <span class="qtext400">@annot: value</span> format is not possible. <span class="qtext400">@annot: [value]</span> has to be used instead.</li>
</ul>
<ul class="disc">
<li>The annotations (of a CDS entity) defined in metadata extensions does not have any effect on the
activation or the behavior at runtime. They are only taken into account by class <span class="lnkgrey">CL_DD_DDL_ANNOTATION_SERVICE</span>.</li>
</ul>
<p><span class="h4">
Example
</span></p>
<p>
The following metadata extension named DEMO_CDS_METADATA_EXTENSION adds annotations with original language "German" to the CDS view DEMO_CDS_PARAMETERS from the executable example for
<a href="javascript:call_link('abenselect_cds_para_abexa.html')" class="blue">CDS views with parameters</a>. The program <span class="lnkgrey">
DEMO_CDS_META_DATA_EXTENSIONS</span> reads the annotations of the view with the methods of the classes
<span class="lnkgrey">CL_DD_DDL_ANNOTATION_SERVICE</span> and <span class="lnkgrey">CL_DD_DDL_ANALYZE</span>.
The method GET_ANNOS of the class CL_DD_DDL_ANNOTATION_SERVICE takes into account the definitions in
the metadata extension and the translations into the current logon language. The method GET_ANNOTATIONS of the class CL_DD_DDL_ANALYZE only evaluates the specifications in the view DEMO_CDS_PARAMETERS.
</p>
<dl><dd>
<span class="qtext400">@Metadata.layer: #INDUSTRY <br> <br>@EndUserText.label: 'Demo for view with parameters' <br>
 <br>annotate view demo_cds_parameters with <br>&nbsp;&nbsp;parameters <br>&nbsp;&nbsp;&nbsp;&nbsp;@EndUserText.label: 'Lower distance boundary' <br>
&nbsp;&nbsp;&nbsp;&nbsp;p_distance_l, <br>&nbsp;&nbsp;&nbsp;&nbsp;@EndUserText.label: 'Upper distance boundary' <br>
&nbsp;&nbsp;&nbsp;&nbsp;p_distance_u, <br>&nbsp;&nbsp;&nbsp;&nbsp;@EndUserText.label: 'Unit of distance' <br>
&nbsp;&nbsp;&nbsp;&nbsp;p_unit <br>{ <br>&nbsp;&nbsp;@EndUserText.label: 'Carrier' <br>&nbsp;&nbsp;carrid; <br>
&nbsp;&nbsp;@EndUserText.label: 'Connection' <br>&nbsp;&nbsp;connid; <br>&nbsp;&nbsp;@EndUserText.label: 'Depart from city' <br>
&nbsp;&nbsp;cityfrom; <br>&nbsp;&nbsp;@EndUserText.label: 'Arrive in city' <br>&nbsp;&nbsp;cityto; <br>&nbsp;&nbsp;@EndUserText.label: 'Flight distance' <br>
&nbsp;&nbsp;distance; <br>&nbsp;&nbsp;@EndUserText.label: 'Unit of flight distance' <br>&nbsp;&nbsp;distid; <br>}</span> <br><br>
</dd></dl>
<A NAME="@@VARIANT@@!ABAP_CDS_ANNOTATE_VIEW!@@"></A>
<p><span class="h3">
<A NAME="!ABAP_ONE_ADD@1@"></A> <span class="bold">Addition</span>
</span></p>
<P>
<span class="qtext">... VARIANT variant</span> <!-- /A -->  <br>
</P>
<p><span class="h4">
Effect
</span></p>
<p>
Links the metadata extension to a <a href="javascript:call_link('abencds_variant_glosry.html')" class="grey" title="Glossary Entry">
CDS variant</a>. An existing CDS variant must be specified for <span class="qtext400">variant</span>.
This entry is not case sensitive. If there are multiple metadata extensions for the same CDS entity
contained in the layer defined with annotation <span class="qtext400">@Metadata.layer</span>, these
extensions should be assigned to CDS variants, because otherwise a warning is raised by the syntax check for duplicate annotations.
</p>
<p>
For the <a href="javascript:call_link('abencds_annotations_analysis.html')" class="blue">evaluation of annotations</a> with class
<span class="lnkgrey">CL_DD_DDL_ANNOTATION_SERVICE</span>, you can specify the CDS variant, in order
to select the metadata extension. The class collects the annotations that it returned, in accordance with the layers and variants in line with the hierarchy described under the
<a href="javascript:call_link('abencds_meta_data_extension_eval.html')" class="blue">evaluation of metadata extensions</a>.
</p>
<p><span class="h4">
Notes
</span></p>
<ul class="disc">
<li><a href="javascript:call_link('abencds_variant_glosry.html')" class="grey" title="Glossary Entry">CDS variants</a> are created in the ADT and this creation process is documented in the
<a href="javascript:call_link('abenadt_glosry.html')" class="grey" title="Glossary Entry">ADT</a>.</li>
</ul>
<ul class="disc">
<li>From a technical viewpoint, the annotations defined in metadata extensions for a CDS entity are
similar to the annotations defined in the CDS source code, separated by layers and variants in separate system tables and made accessible using an API. Annotations with
<a href="javascript:call_link('abencds_annotations_analysis.html')" class="blue">translatable texts</a> are also stored here in tables, which are connected to translation. The class CL_DD_DDL_ANNOTATION_SERVICE evaluates the system tables.</li>
</ul>
<p><span class="h4">
Caution
</span></p>
<p>
<span class="bold">CDS variants are not currently released for general use. It is not possible to define standalone CDS variants and the use of CDS variants in metadata extensions produces a syntax check warning.</span>
</p>
<p><span class="h4">
Executable Example
</span></p>
<p>
<a href="javascript:call_link('abencds_annotate_view_abexa.html')" class="blue">CDS Metadata Extensions with CDS Variants</a>
</p>
<br>
<br>
<!-- POSTFIX --><span class="h4">Continue</span><br>
<a href="javascript:call_link('abencds_f1_metadata_ext_annos.html')" class="blue">ABAP CDS - ANNOTATE VIEW, metadata_extension_annot</a><br>
<a href="javascript:call_link('abencds_f1_annotate_view_para_list.html')" class="blue">ABAP CDS - ANNOTATE VIEW, parameter_list</a><br>
<a href="javascript:call_link('abencds_f1_annotate_view_sele_list.html')" class="blue">ABAP CDS - ANNOTATE VIEW, element_list</a><br>
<br>
<br>
</DIV>
<fieldset style="opacity:0">
<input id="url" type="text" />
</fieldset>
</BODY>

<!-- Mirrored from help.sap.com/doc/abapdocu_751_index_htm/7.51/en-US/abencds_f1_annotate_view.htm by HTTrack Website Copier/3.x [XR&CO'2014], Thu, 20 Jan 2022 17:25:26 GMT -->
</html>
