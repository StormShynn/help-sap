<!doctype HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html lang="EN">
<!-- ABAPINSERT_SOURCE -->

<!-- Mirrored from help.sap.com/doc/abapdocu_751_index_htm/7.51/en-US/abapinsert_source.htm by HTTrack Website Copier/3.x [XR&CO'2014], Thu, 20 Jan 2022 17:43:17 GMT -->
<head>
<meta http-equiv="content-type" content="text/html; charset=utf-8">
<meta name="author" content="SAP">
<meta name="description" content="INSERT dbtab - source">
<title>
INSERT dbtab - source - ABAP Keyword Documentation
</title>
<link rel="icon" href="ABAPIcon.ico" type="image/ico">
<link rel="shortcut icon" href="ABAPIcon.ico">
<LINK rel="stylesheet" href="abap_docu.css" type="text/css">
<script type="text/JavaScript">
function call_link(linked_file)
{
   if(parent.frames.length>0){
     parent.window.frames["basefrm"].window.location = linked_file;
     parent.window.frames["treeframe"].window.location = "abap_docu_tree92bd.html?file=" + linked_file;}
   else {
     window.location = linked_file;}
}
function urlToClipboard(id){
 try{ var loc = top.location.href;}
 catch(e){ alert( "URL cannnot be determined" ); return; }
 var field = document.getElementById(id);
 field.focus();
 if ( loc.search( ".htm" ) == -1 && loc.search( ".HTM" ) == -1  ){ loc = loc + "index.htm"; }
 if (   loc.search( "index.html" ) != -1
     || loc.search( "INDEX-2.html" ) != -1 ){
   var off = loc.search( "file=" );
   if ( off == -1  ){
     field.value = loc + "?file=abapinsert_source.htm"; }
   else {
     field.value = loc.substring( 0, off ) + "file=abapinsert_source.htm";
   }
 }
 else {
    field.value = loc; }
 field.setSelectionRange(0, field.value.length);
 var r = confirm( "Copy URL to clipboard?\n\n" + field.value + "\n\nCopy to clipboard does not work in all browsers." );
 if (r == true) {
   try{
     document.execCommand("copy");
   }
     catch(e){ alert( "URL could not be copied to clipboard" ); }
 }
 window.scrollTo(0,0);
}
</script>
</head>
<body>
<div class="all">
<p class="copyright">SAP NetWeaver AS ABAP Release 751, &copy;Copyright 2017 SAP AG. All rights reserved.
&nbsp;<input type="button" value="URL" style="font-size:8px; width:26px; height:16px; padding:0"
 onclick="urlToClipboard('url')" title="Copy URL to Clipboard" >
</p>
<span class="path">
<a href="javascript:call_link('abenabap.html')" class="blue">ABAP - Keyword Documentation</a>&nbsp;&rarr;&nbsp;
<a href="javascript:call_link('abenabap_reference.html')" class="blue">ABAP - Reference</a>&nbsp;&rarr;&nbsp;
<a href="javascript:call_link('abenabap_language_external_data.html')" class="blue">Processing External Data</a>&nbsp;&rarr;&nbsp;
<a href="javascript:call_link('abenabap_sql.html')" class="blue">ABAP Database Accesses</a>&nbsp;&rarr;&nbsp;
<a href="javascript:call_link('abenopensql.html')" class="blue">Open SQL</a>&nbsp;&rarr;&nbsp;
<a href="javascript:call_link('abenopen_sql_writing.html')" class="blue">Open SQL - Write Accesses</a>&nbsp;&rarr;&nbsp;
<a href="javascript:call_link('abapinsert_dbtab.html')" class="blue">INSERT dbtab</a>&nbsp;&rarr;&nbsp;
</span>
<p><span class="h1">
INSERT dbtab - source <br><br>
</span></p>
<P>
<a href="javascript:call_link('abapinsert_dbtab_shortref.html')" class="blue">Quick Reference</a> <br><br>
</P>
<p><span class="h2">
<span class="bold">Syntax</span>
</span></p>
<P>
<span class="qtext">...&nbsp;&nbsp;@wa</span> <br><span class="qtext">&nbsp;&nbsp;<i class=bn>|</i> <i
class=bn>{</i>TABLE @itab <i class=bn>[</i>ACCEPTING DUPLICATE KEYS<i class=bn>]</i> <i class=bn>}</i></span> <br>
<span class="qtext">&nbsp;&nbsp;<i class=bn>|</i> ( SELECT
<a href="javascript:call_link('abapinsert_from_select.html')" class="blue">subquery_clauses</a> <i class=bn>[</i><a href="javascript:call_link('abapunion.html')" class="blue">UNION ...</a><i class=bn>]</i> ) ...</span> <br><br>
</P>
<p><span class="h2">
Alternatives:
</span></p>
<P>
   <A HREF="#!ABAP_ALTERNATIVE_1@1@" class="blue"> 1. <span class="qtext">... @wa ...</span> </A> <br><br>
<A HREF="#!ABAP_ALTERNATIVE_2@2@" class="blue"> 2. <span class="qtext">... TABLE @itab <i class=bn>[</i>ACCEPTING DUPLICATE KEYS<i class=bn>]</i> ...</span> </A> <br>
<br><A HREF="#!ABAP_ALTERNATIVE_3@3@" class="blue"> 3. <span class="qtext">... ( SELECT subquery_clauses <i class=bn>[</i>UNION ...<i class=bn>]</i> ) ...</span> </A> <br><br>
</P>
<p><span class="h4">
Effect
</span></p>
<P>
A non-table-like data object <span class="qtext">wa</span> can be specified as a data source after the
additions <span class="qtext">VALUES</span> and <span class="qtext">FROM</span> of the statement <a href="javascript:call_link('abapinsert_dbtab.html')" class="blue">
<span class="qtext">INSERT</span></a>. After <span class="qtext">FROM TABLE</span>, an internal table <span class="qtext">itab</span> can also be specified. Both data objects can be specified as
<a href="javascript:call_link('abenopen_sql_host_variables.html')" class="blue">host variables</a> or
<a href="javascript:call_link('abenopen_sql_host_expressions.html')" class="blue">host expressions</a>. The contents of the row(s)
to be inserted are taken from these data objects. The escape character <span class="qtext">@</span> should precede the work area name or the internal table name (as should be the case with every
<a href="javascript:call_link('abenopen_sql_host_variables.html')" class="blue">host variable</a>).
</P>
<p><span class="h4">
Note
</span></p>
<P>
Host variables without the escape character <span class="qtext">@</span> are
<a href="javascript:call_link('abenopen_sql_hostvar_obsolete.html')" class="blue">obsolete</a>. The escape character <span class="qtext">@</span> must be specified in the
<a href="javascript:call_link('abenopensql_strict_modes.html')" class="blue">strict modes</a> of the syntax check from Release 7.40, SP05. <br><br>
</P>
<p><span class="h2">
<A NAME="!ABAP_ALTERNATIVE_1@1@"></A> <span class="bold">Alternative 1</span>
</span></p>
<P>
<span class="qtext">... @wa ...</span> <br><br><br><!-- /A -->
</P>
<p><span class="h4">
Effect
</span></p>
<P>
After <a href="javascript:call_link('abapinsert_dbtab.html')" class="blue"><span class="qtext">VALUES</span></a> and <a href="javascript:call_link('abapinsert_dbtab.html')" class="blue">
<span class="qtext">FROM</span></a>, a non-table-like work area <span class="qtext">wa</span> can be specified (as a
<a href="javascript:call_link('abenopen_sql_host_variables.html')" class="blue">host variable</a> or
<a href="javascript:call_link('abenopen_sql_host_expressions.html')" class="blue">host expression</a>), from whose content a row is created for insertion in the database table.  The work area must meet the
<a href="javascript:call_link('abenopen_sql_wa.html')" class="blue">prerequisites</a> for use in Open SQL statements.
</P>
<ul class="disc">
<li>
When specifying a work area that does not contain any reference variables for
<a href="javascript:call_link('abenlob_handle_glosry.html')" class="grey" title="Glossary Entry">LOB Handles</a>, the content
of the row to be added is taken from the work area <span class="qtext">wa</span> while ignoring its data type and without converting it from left to right in accordance with the structure of the database table or the
<a href="javascript:call_link('abenview_glosry.html')" class="grey" title="Glossary Entry">view</a>.
<br><br></li>
<li>
When a <a href="javascript:call_link('abenlob_handle_structure_glosry.html')" class="grey" title="Glossary Entry">LOB handle structure</a> is specified, it must be constructed (in accordance with the
<a href="javascript:call_link('abenopen_sql_wa.html')" class="blue">prerequisites</a>) exactly like the structure of the database table. The components of the work area that are not
<a href="javascript:call_link('abenlob_handle_component_glosry.html')" class="grey" title="Glossary Entry">LOB Handle components</a>
are assigned directly to the corresponding columns of the new row. In the case of a LOB handle component
of a reader stream type, this type is created. In this case of a type for a locator: this must exist and is used as a source. For details, see <a href="javascript:call_link('abeninsert_update_modify_lob.html')" class="blue">LOB handles</a>.
<br></li>
</ul>
<P>
The new row is inserted in the database table if this does not already contain a row with the same
<a href="javascript:call_link('abenprimary_key_glosry.html')" class="grey" title="Glossary Entry">primary key</a> or the same unique secondary index. If it does, the row is not inserted and <span class="qtext">sy-subrc</span> is set to 4.
</P>
<P>
If a view is specified in <a href="javascript:call_link('abapinsert_target.html')" class="blue"><span class="qtext">target</span></a> that does not include all columns in the database table, these are set to the type-friendly
<a href="javascript:call_link('abeninitial_value_glosry.html')" class="grey" title="Glossary Entry">initial value</a> or to the
<a href="javascript:call_link('abennull_value_glosry.html')" class="grey" title="Glossary Entry">null value</a> in the inserted
rows. The latter applies only if, for the columns of the database table in question, the attribute <a href="javascript:call_link('abenddic_database_tables_init.html')" class="blue">
<span class="qtext400">NOT NULL</span></a> is not selected in the database.
</P>
<P>
By default, an automatic client handling is performed, which means that any
<a href="javascript:call_link('abenclient_identifier_glosry.html')" class="grey" title="Glossary Entry">client identifier</a>
specified in <span class="qtext">wa</span> is ignored and the current client is used instead. This is
ignored by <span class="qtext">wa</span>. Automatic client handling can be switched off using the addition <a href="javascript:call_link('abapinsert_target.html')" class="blue"> <span class="qtext">CLIENT SPECIFIED</span></a>.
</P>
<p><span class="h4">
Notes
</span></p>
<ul class="disc">
<li>
The work area <span class="qtext">wa</span> should always be declared in relation to the database table or the view in ABAP Dictionary. For the derivation of
<a href="javascript:call_link('abenlob_handle_structure_glosry.html')" class="grey" title="Glossary Entry">LOB handle structures</a>, there are special
<a href="javascript:call_link('abaptypes_lob_handle.html')" class="blue">additions</a> of the statements <span class="qtext">TYPES</span> and <span class="qtext"><i class=bn>[</i>CLASS-<i class=bn>]</i>DATA</span>.
<br><br></li>
<li>
If a <a href="javascript:call_link('abenconstructor_expression_glosry.html')" class="grey" title="Glossary Entry">constructor expression</a> is specified as a
<a href="javascript:call_link('abenopen_sql_host_expressions.html')" class="blue">host expression</a> for the work area <span class="qtext">
wa</span>, for which the data type is inferred using the <span class="qtext">#</span> character, a structure consisting of all the database table columns is created as the type.
<br><br></li>
<li>
If the database table or the view is specified statically, an obsolete
<a href="javascript:call_link('abapinsert_obsolete.html')" class="blue">short form</a> of the specification outside of classes
is possible. This means that the specification of the work area using <span class="qtext">FROM wa</span> in the variant without <span class="qtext">INTO</span> can be omitted. The prerequisite is that a
<a href="javascript:call_link('abentable_work_area_glosry.html')" class="grey" title="Glossary Entry">table work area</a> <span class="qtext">
dbtab</span> for the respective database table or the view is declared using the statement <span class="qtext">TABLES</span>.
The runtime environment then adds the addition <span class="qtext">FROM dbtab</span> to the statement <span class="qtext">INSERT</span> implicitly. <br><br>
<br></li>
</ul>
<p><span class="h4">
Example
</span></p>
<P>
Inserting a new airline in the database table <span class="lnkgrey">SCARR</span>.
</P>
<p class="qtextml1">
<span class="qtext">
DATA scarr_wa TYPE scarr. <br> <br>scarr_wa-carrid&nbsp;&nbsp; = 'FF'. <br>scarr_wa-carrname = 'Funny Flyers'. <br>
scarr_wa-currcode = 'EUR'. <br>scarr_wa-url&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;= 'http://www.funnyfly.com'. <br> <br>INSERT INTO scarr VALUES @scarr_wa.
</span>
</p>
<p><span class="h4">
Example
</span></p>
<P>
The same example as before but with the value operator <a href="javascript:call_link('abenconstructor_expression_value.html')" class="blue"><span class="qtext">VALUE</span></a> in a
<a href="javascript:call_link('abenopen_sql_host_expressions.html')" class="blue">host expression</a>.
</P>
<p class="qtextml1">
<span class="qtext">
INSERT INTO scarr VALUES @( VALUE #( <br>&nbsp;&nbsp;carrid&nbsp;&nbsp; = 'FF' <br>&nbsp;&nbsp;carrname = 'Funny Flyers' <br>
&nbsp;&nbsp;currcode = 'EUR' <br>&nbsp;&nbsp;url&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;= 'http://www.funnyfly.com' ) ). <br><br>
</span>
</p>
<A NAME="@@TABLE@@INSERT dbtab@@"></A>
<A NAME="@@ACCEPTING DUPLICATE KEYS@@INSERT dbtab@@"></A>
<p><span class="h2">
<A NAME="!ABAP_ALTERNATIVE_2@2@"></A> <span class="bold">Alternative 2</span>
</span></p>
<P>
<span class="qtext">... TABLE @itab <i class=bn>[</i>ACCEPTING DUPLICATE KEYS<i class=bn>]</i> ...</span> <br><br><br><!-- /A -->
</P>
<p><span class="h4">
Effect
</span></p>
<P>
An internal table <span class="qtext">itab</span> can be specified as a
<a href="javascript:call_link('abenopen_sql_host_variables.html')" class="blue">host variable</a> or
<a href="javascript:call_link('abenopen_sql_host_expressions.html')" class="blue">host expression</a> after <a href="javascript:call_link('abapinsert_dbtab.html')" class="blue">
<span class="qtext">FROM</span></a> and <span class="qtext">TABLE</span>, from whose content multiple rows are created for insertion in the database table. The row type of the internal table must meet the
<a href="javascript:call_link('abenopen_sql_wa.html')" class="blue">prerequisites</a> for use in Open SQL statements.
</P>
<P>
The content of each row of the internal table is composed using the same rules as for a single work area <span class="qtext">wa</span> with the exception that when inserting from an internal table
<a href="javascript:call_link('abenlocator_glosry.html')" class="grey" title="Glossary Entry">locators</a> operate as the source but no
<a href="javascript:call_link('abenwriter_stream_glosry.html')" class="grey" title="Glossary Entry">writer streams</a> can be created.
</P>
<P>
If no row with the same <a href="javascript:call_link('abenprimary_key_glosry.html')" class="grey" title="Glossary Entry">primary
key</a> or with the same unique secondary index exists in the database table for any of the rows to
be inserted, all rows are inserted and <span class="qtext">sy-subrc</span> is set to 0. If the internal
table is empty, no rows are inserted. However <span class="qtext">sy-subrc</span> is still set to 0. The system field <span class="qtext">sy-dbcnt</span> is set to the number of rows that are inserted.
</P>
<P>
If a row with the same primary key or the same unique secondary index exists in the database table for
one or more of the rows to be inserted, these rows cannot be inserted. In this situation, there are the following options:
</P>
<ul class="disc">
<li>
Using <span class="qtext">ACCEPTING DUPLICATE KEYS</span> <br> <br>If the addition <span class="qtext">ACCEPTING
DUPLICATE KEYS</span> is specified, all rows are inserted for which this is possible. All rows that
would produce duplicate entries with respect to the primary key or to a unique secondary index are discarded
and <span class="qtext">sy-subrc</span> set to 4. The system field <span class="qtext">sy-dbcnt</span> is set to the number of rows that are inserted. <br>
<br></li>
<li>
No use of <span class="qtext">ACCEPTING DUPLICATE KEYS</span>
<br></li>
</ul>
<ul class="circlem2">
<li>Handling of the exception CX_SY_OPEN_SQL_DB <br> <br>If the addition <span class="qtext">ACCEPTING
DUPLICATE KEYS</span> is not specified, the handleable exception CX_SY_OPEN_SQL_DB is raised when a
duplicate row is inserted. Rows continue to be inserted until the exception is raised and handled. The
number of inserted rows is undefined. The system fields <span class="qtext">sy-subrc</span> and <span class="qtext">sy-dbcnt</span> retain their previous value. <br></li>
</ul>
<ul class="circlem2">
<li>No handling of the exception CX_SY_OPEN_SQL_DB <br> <br>If the addition <span class="qtext">ACCEPTING
DUPLICATE KEYS</span> is not specified and if the exception is not handled, a runtime error occurs when a duplicate row is inserted. This executes a
<a href="javascript:call_link('abendb_rollback.html')" class="blue">database rollback</a> that rolls back all changes to the current
<a href="javascript:call_link('abendb_transaction.html')" class="blue">database LUW</a>. This applies in particular to rows that were inserted before the duplicate entry was made. <br></li>
</ul>
<p><span class="h4">
Notes
</span></p>
<ul class="disc">
<li>
The addition <span class="qtext">ACCEPTING DUPLICATE KEYS</span> does not indicate that duplicate key
entries are accepted in the strict sense of the word. More specifically, no change is made to an existing
entry as is the case when <a href="javascript:call_link('abapmodify_dbtab.html')" class="blue"><span class="qtext">MODIFY</span></a>
is used. Instead, <span class="qtext">ACCEPTING DUPLICATE KEYS</span> prevents the associated exception from being raised and sets the return code <span class="qtext">sy-subrc</span> to 4.
<br><br></li>
<li>
If the runtime error produced by inserting existing rows is prevented by handling an exception, a program-driven
database rollback must be initiated, instead of using the addition <span class="qtext">ACCEPTING DUPLICATE KEYS</span>.
<br><br></li>
<li>
When an internal table is used, package by package processing makes only some of the rows being inserted visible to any reads running in parallel with the <span class="qtext">INSERT</span>.
<br><br></li>
<li>
If a <a href="javascript:call_link('abenconstructor_expression_glosry.html')" class="grey" title="Glossary Entry">constructor expression</a> as a
<a href="javascript:call_link('abenopen_sql_host_expressions.html')" class="blue">host expression</a> is specified as an internal
table <span class="qtext">itab</span>, for which the data type is inferred using the <span class="qtext">#</span>
character, a structured standard table (whose row type consists of all the database table columns) with an empty table key is created as the type.
<br></li>
</ul>
<p><span class="h4">
Example
</span></p>
<P>
Inserting multiple rows in a <a href="javascript:call_link('abenopen_sql_host_expressions.html')" class="blue">host expression</a>
using the value operator <a href="javascript:call_link('abenconstructor_expression_value.html')" class="blue"><span class="qtext">VALUE</span></a>.
</P>
<p class="qtextml1">
<span class="qtext">
INSERT scarr FROM TABLE @( VALUE #( <br>&nbsp;&nbsp;( carrid&nbsp;&nbsp; = 'FF' <br>&nbsp;&nbsp;&nbsp;&nbsp;carrname = 'Funny Flyers' <br>
&nbsp;&nbsp;&nbsp;&nbsp;currcode = 'EUR' <br>&nbsp;&nbsp;&nbsp;&nbsp;url&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;= 'http://www.funnyfly.com' ) <br>
&nbsp;&nbsp;( carrid&nbsp;&nbsp; = 'XXL' <br>&nbsp;&nbsp;&nbsp;&nbsp;carrname = 'Extra Large Line' <br>&nbsp;&nbsp;&nbsp;&nbsp;currcode = 'USD' <br>
&nbsp;&nbsp;&nbsp;&nbsp;url&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;= 'http://www.xxlline.com' ) ) ). <br><br>
</span>
</p>
<A NAME="@@SELECT@@INSERT FROM@@"></A>
<p><span class="h2">
<A NAME="!ABAP_ALTERNATIVE_3@3@"></A> <span class="bold">Alternative 3</span>
</span></p>
<P>
<span class="qtext">... ( SELECT subquery_clauses <i class=bn>[</i>UNION ...<i class=bn>]</i> ) ...</span> <br><br><br><!-- /A -->
</P>
<p><span class="h4">
Effect
</span></p>
<P>
A parenthesized <a href="javascript:call_link('abensubquery_glosry.html')" class="grey" title="Glossary Entry">subquery</a> can
be specified as a data source after <a href="javascript:call_link('abapinsert_dbtab.html')" class="blue"><span class="qtext">FROM</span></a>.
The lines of the result set of a subquery are inserted, which is defined by the corresponding clauses
<a href="javascript:call_link('abapinsert_from_select.html')" class="blue"><span class="qtext">subquery_clauses</span></a>. The
language element <a href="javascript:call_link('abapunion.html')" class="blue"><span class="qtext">UNION</span></a> can be used
to combine the result sets of multiple subqueries. In this case, additional rules <a href="javascript:call_link('abapunion_clause.html')" class="blue"><span class="qtext">query_clauses</span></a> apply for specifying clauses.
</P>
<P>
If a subquery is used as a data source, automatic
<a href="javascript:call_link('abenclient_handling_glosry.html')" class="grey" title="Glossary Entry">client handling</a> in
the <span class="qtext">INSERT</span> statement cannot be deactivated using the addition <a href="javascript:call_link('abapinsert_target.html')" class="blue">
<span class="qtext">CLIENT SPECIFIED</span></a>. The client column of a client-specific database table
or classic view filled using the <span class="qtext">INSERT</span> statement is filled with the ID of
the current client or the client specified using <a href="javascript:call_link('abapinsert_target.html')" class="blue"><span class="qtext">USING CLIENT</span></a>, regardless of the results set of the subquery.
</P>
<P>
The data from the results set is inserted into the database table or classic view in question column
by column in the database system. The columns are assigned in accordance with their position and the
names of the columns in the results set are ignored. The columns assigned to each other must have the same type attributes with respect to
<a href="javascript:call_link('abenddic_builtin_types.html')" class="blue">predefined data type</a>, length, and number of digits after the decimal point, with the following exceptions:
</P>
<ul class="disc">
<li>
In the case of the numeric types <a href="javascript:call_link('abenddic_builtin_types.html')" class="blue">INT1</a>,
<a href="javascript:call_link('abenddic_builtin_types.html')" class="blue">INT2</a>,
<a href="javascript:call_link('abenddic_builtin_types.html')" class="blue">INT4</a>, and
<a href="javascript:call_link('abenddic_builtin_types.html')" class="blue">INT8</a>, columns with a lesser value range can be assigned to a column with a greater value range.
<br><br></li>
<li>
In the case of the numeric type <a href="javascript:call_link('abenddic_builtin_types.html')" class="blue">DEC</a>, columns with
shorter lengths can be assigned to columns with greater lengths. Furthermore, columns with fewer decimal
places can be assigned to columns with more decimal places, as long as there are enough integer digits. The corresponding special types
<a href="javascript:call_link('abenddic_builtin_types.html')" class="blue">CURR</a> and
<a href="javascript:call_link('abenddic_builtin_types.html')" class="blue">QUAN</a> are handled here like <a href="javascript:call_link('abenddic_builtin_types.html')" class="blue">DEC</a>.
<br><br></li>
<li>
The numeric types <a href="javascript:call_link('abenddic_builtin_types.html')" class="blue">DF16_DEC</a> and
<a href="javascript:call_link('abenddic_builtin_types.html')" class="blue">DF34_DEC</a> are handled like the numbers of type
<a href="javascript:call_link('abenddic_builtin_types.html')" class="blue">DEC</a> (as they are saved) and the rule above applies with respect to lengths and decimal places.
<br><br></li>
<li>
In the case of the character-like type <a href="javascript:call_link('abenddic_builtin_types.html')" class="blue">CHAR</a>, columns with shorter lengths can be assigned to columns with greater lengths. The corresponding special types
<a href="javascript:call_link('abenddic_builtin_types.html')" class="blue">CLNT</a>,
<a href="javascript:call_link('abenddic_builtin_types.html')" class="blue">LANG</a>,
<a href="javascript:call_link('abenddic_builtin_types.html')" class="blue">CUKY</a>, and
<a href="javascript:call_link('abenddic_builtin_types.html')" class="blue">UNIT</a> are handled here like <a href="javascript:call_link('abenddic_builtin_types.html')" class="blue">CHAR</a>.
<br></li>
</ul>
<P>
All other types must be exactly the same. This applies specifically to
<a href="javascript:call_link('abenddic_builtin_types.html')" class="blue">NUMC</a> and
<a href="javascript:call_link('abenddic_builtin_types.html')" class="blue">RAW</a>, where the lengths must match. The different categories of
<a href="javascript:call_link('abenddic_character_byte_types.html')" class="blue">strings</a> cannot be combined either.
</P>
<P>
The statement <span class="qtext">INSERT</span> with subquery does not insert any
<a href="javascript:call_link('abennull_value_glosry.html')" class="grey" title="Glossary Entry">null values</a> into the database table or classic view in question. Null values for insertion can be produced in the following cases:
</P>
<ul class="disc">
<li>
As results of <a href="javascript:call_link('abapselect_join.html')" class="blue">outer joins</a> in the <span class="qtext">FORM</span> clause of the subquery
<br><br></li>
<li>
As results of <a href="javascript:call_link('abapsql_expr.html')" class="blue">SQL expressions</a> in the <span class="qtext">SELECT</span> list of the subquery
<br><br></li>
<li>
If a field read by the subquery already contains a null value
<br></li>
</ul>
<P>
In these cases, the following is done instead of inserting a null value:
</P>
<ul class="disc">
<li>
The <a href="javascript:call_link('abenddic_builtin_types.html')" class="blue">type-friendly initial value</a> is inserted for columns that are not
<a href="javascript:call_link('abenkey_field_glosry.html')" class="grey" title="Glossary Entry">key fields</a> of the database table or classic view in question.
<br><br></li>
<li>
An exception that can be caught using the exception class CX_SY_OPEN_SQL_DB is raised in the case of columns that are
<a href="javascript:call_link('abenkey_field_glosry.html')" class="grey" title="Glossary Entry">key fields</a> of the database
table or classic view in question. If it is statically identifiable that null values can be inserted
into key fields, a syntax check warning that can be hidden by the pragma <span class="qtext">null_values</span> is produced.
<br></li>
</ul>
<P>
Columns of the database table or classic view in question that do not have a column in the results set of the subquery are also filled with their type-friendly initial value.
</P>
<P>
If it was possible to insert all rows of the results set, <span class="qtext">sy-subrc</span> is set to 0. If it was not possible to insert a row from the results set (since a row with the same
<a href="javascript:call_link('abenprimary_key_glosry.html')" class="grey" title="Glossary Entry">primary key</a> or an identical
unique secondary index exists), all previously inserted rows are discarded and a catchable exception
of the class CX_SY_OPEN_SQL_DB is raised. If the results set of the subquery is empty, no row is inserted and <span class="qtext">sy-subrc</span> is set to 4.
</P>
<P>
The statement <span class="qtext">INSERT</span> with subquery cannot be used if
<a href="javascript:call_link('abenddic_database_tables_protocol.html')" class="blue">logging</a> is enabled for the table in question, and hence the corresponding
<a href="javascript:call_link('abenddic_database_tables_techspec.html')" class="blue">technical attribute</a> of the database
table and the profile parameter <span class="lnkgrey">rec/client</span> are set accordingly. If used for a database table with logging enabled, the non-handleable exception DBSQL_DBPRT_STATEMENT is raised. <br><br>
</P>
<p><span class="h4">
Notes
</span></p>
<ul class="disc">
<li>
Using subqueries produces better performance than using standalone <span class="qtext">SELECT</span> statements to read data into an internal table and using this table as a data source.
<br><br></li>
<li>
Unlike when inserting rows from an internal table <span class="qtext">itab</span>, the content of the modified table or classic view is always defined after the exception CX_SY_OPEN_SQL_DB is handled.
<br><br></li>
<li>
This variant of the <span class="qtext">INSERT</span> statement is particularly well suited to filling <a href="javascript:call_link('abenglobal_temporary_table_glosry.html')" class="grey" title="Glossary Entry">global temporary tables</a>.
<br><br></li>
<li>
In certain circumstances, <a href="javascript:call_link('abensql_cast.html')" class="blue"><span class="qtext">CAST</span> expressions</a>
can be used in the <span class="qtext">SELECT</span> list of the subquery for combinations between columns forbidden by the rules above.
<br><br></li>
<li>
A <a href="javascript:call_link('abapselect_list.html')" class="blue"><span class="qtext">SELECT</span> list</a> of the subquery specified using <span class="qtext">*</span> ignores all client columns, which means that client-specific
<a href="javascript:call_link('abencds_entity_glosry.html')" class="grey" title="Glossary Entry">CDS entities</a> whose results sets do not have a client column can be accessed without any problems.
<br><br></li>
<li>
Currently, only the data of a single client can be edited using <span class="qtext">INSERT</span> and a subquery. More specifically, it is not possible to copy the data from one client to a different client.
<br><br></li>
<li>
Attempts to fill <a href="javascript:call_link('abenkey_field_glosry.html')" class="grey" title="Glossary Entry">key fields</a>
with null values raise exceptions, which also prevents duplicate entries from being made in the table or classic view in question.
<br><br></li>
<li>
Database tables and views accessed using this variant of the <span class="qtext">INSERT</span> statement should not be expanded independently from one another, to avoid syntax errors.
<br><br></li>
<li>
To avoid exceptions when performing writes to a database table with
<a href="javascript:call_link('abenddic_database_tables_protocol.html')" class="blue">logging</a> enabled. the method IS_LOGGING_ON
of the system class <span class="lnkgrey">CL_DBI_UTILITIES</span> can be used to branch to an alternative implementation.
<br><br></li>
<li>
Subqueries cannot be used when accessing <a href="javascript:call_link('abenpooled_table_glosry.html')" class="grey" title="Glossary Entry">pooled tables</a> or
<a href="javascript:call_link('abencluster_table_glosry.html')" class="grey" title="Glossary Entry">cluster tables</a>.
<br><br></li>
<li>
When a subquery is used, the syntax check is performed in a <a href="javascript:call_link('abenopensql_strict_mode_750.html')" class="blue">strict mode</a>, which handles the statement more strictly than the regular syntax check. <br><br>
<br></li>
</ul>
<p><span class="h4">
Executable Examples
</span></p>
<ul class="disc">
<li>
<a href="javascript:call_link('abeninsert_from_select_abexa.html')" class="blue"><span class="qtext">INSERT, FROM SELECT</span></a>
<br><br></li>
<li>
<a href="javascript:call_link('abenselect_union_sum_gtt_abexa.html')" class="blue">Union with Global Temporary Table</a>
<br></li>
</ul>
<br>
<br>
<!-- POSTFIX --><span class="h4">Continue</span><br>
<a href="javascript:call_link('abapinsert_from_select.html')" class="blue">INSERT dbtab - subquery_clauses</a><br>
<img src="exa.gif" alt="Example" title="Example">
<a href="javascript:call_link('abeninsert_from_select_abexa.html')" class="blue">INSERT, FROM SELECT</a><br>
<br>
<br>
</DIV>
<fieldset style="opacity:0">
<input id="url" type="text" />
</fieldset>
</BODY>

<!-- Mirrored from help.sap.com/doc/abapdocu_751_index_htm/7.51/en-US/abapinsert_source.htm by HTTrack Website Copier/3.x [XR&CO'2014], Thu, 20 Jan 2022 17:43:21 GMT -->
</html>
