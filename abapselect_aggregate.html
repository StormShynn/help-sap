<!doctype HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html lang="EN">
<!-- ABAPSELECT_AGGREGATE -->

<!-- Mirrored from help.sap.com/doc/abapdocu_751_index_htm/7.51/en-US/abapselect_aggregate.htm by HTTrack Website Copier/3.x [XR&CO'2014], Thu, 20 Jan 2022 17:43:09 GMT -->
<head>
<meta http-equiv="content-type" content="text/html; charset=utf-8">
<meta name="author" content="SAP">
<meta name="description" content="SELECT - aggregate">
<meta name="keywords" content="ABAP, Aggregate, Aggregate Expressions, Aggregate Functions">
<title>
SELECT - aggregate - ABAP Keyword Documentation
</title>
<link rel="icon" href="ABAPIcon.ico" type="image/ico">
<link rel="shortcut icon" href="ABAPIcon.ico">
<LINK rel="stylesheet" href="abap_docu.css" type="text/css">
<script type="text/JavaScript">
function call_link(linked_file)
{
   if(parent.frames.length>0){
     parent.window.frames["basefrm"].window.location = linked_file;
     parent.window.frames["treeframe"].window.location = "abap_docu_tree92bd.html?file=" + linked_file;}
   else {
     window.location = linked_file;}
}
function urlToClipboard(id){
 try{ var loc = top.location.href;}
 catch(e){ alert( "URL cannnot be determined" ); return; }
 var field = document.getElementById(id);
 field.focus();
 if ( loc.search( ".htm" ) == -1 && loc.search( ".HTM" ) == -1  ){ loc = loc + "index.htm"; }
 if (   loc.search( "index.html" ) != -1
     || loc.search( "INDEX-2.html" ) != -1 ){
   var off = loc.search( "file=" );
   if ( off == -1  ){
     field.value = loc + "?file=abapselect_aggregate.htm"; }
   else {
     field.value = loc.substring( 0, off ) + "file=abapselect_aggregate.htm";
   }
 }
 else {
    field.value = loc; }
 field.setSelectionRange(0, field.value.length);
 var r = confirm( "Copy URL to clipboard?\n\n" + field.value + "\n\nCopy to clipboard does not work in all browsers." );
 if (r == true) {
   try{
     document.execCommand("copy");
   }
     catch(e){ alert( "URL could not be copied to clipboard" ); }
 }
 window.scrollTo(0,0);
}
</script>
</head>
<body>
<div class="all">
<p class="copyright">SAP NetWeaver AS ABAP Release 751, &copy;Copyright 2017 SAP AG. All rights reserved.
&nbsp;<input type="button" value="URL" style="font-size:8px; width:26px; height:16px; padding:0"
 onclick="urlToClipboard('url')" title="Copy URL to Clipboard" >
</p>
<span class="path">
<a href="javascript:call_link('abenabap.html')" class="blue">ABAP - Keyword Documentation</a>&nbsp;&rarr;&nbsp;
<a href="javascript:call_link('abenabap_reference.html')" class="blue">ABAP - Reference</a>&nbsp;&rarr;&nbsp;
<a href="javascript:call_link('abenabap_language_external_data.html')" class="blue">Processing External Data</a>&nbsp;&rarr;&nbsp;
<a href="javascript:call_link('abenabap_sql.html')" class="blue">ABAP Database Accesses</a>&nbsp;&rarr;&nbsp;
<a href="javascript:call_link('abenopensql.html')" class="blue">Open SQL</a>&nbsp;&rarr;&nbsp;
<a href="javascript:call_link('abenopen_sql_reading.html')" class="blue">Open SQL - Reads</a>&nbsp;&rarr;&nbsp;
<a href="javascript:call_link('abenselect_clauses.html')" class="blue">SELECT clauses</a>&nbsp;&rarr;&nbsp;
<a href="javascript:call_link('abapselect_clause.html')" class="blue">SELECT - select_clause</a>&nbsp;&rarr;&nbsp;
<a href="javascript:call_link('abapselect_list.html')" class="blue">SELECT - select_list</a>&nbsp;&rarr;&nbsp;
<a href="javascript:call_link('abapselect_clause_col_spec.html')" class="blue">SELECT - col_spec</a>&nbsp;&rarr;&nbsp;
</span>
<A NAME="@@MAX@@SELECT@@"></A>
<A NAME="@@MIN@@SELECT@@"></A>
<A NAME="@@AVG@@SELECT@@"></A>
<A NAME="@@SUM@@SELECT@@"></A>
<A NAME="@@COUNT@@SELECT@@"></A>
<A NAME="@@DISTINCT@@SELECT aggregate@@"></A>
<A NAME="@@( )@@SELECT aggregate@@"></A>
<p><span class="h1">
SELECT - aggregate <br><br>
</span></p>
<P>
<a href="javascript:call_link('abenaggregate_shortref.html')" class="blue">Quick Reference</a> <br><br>
</P>
<p><span class="h2">
<span class="bold">Syntax</span>
</span></p>
<P>
<span class="qtext">... <i class=bn>{</i> AVG( <i class=bn>[</i>DISTINCT<i class=bn>]</i>
<a href="javascript:call_link('abenopen_sql_columns.html')" class="blue">col</a> <i class=bn>[</i><a href="javascript:call_link('abapselect_avg_as.html')" class="blue">AS dtype</a><i class=bn>]</i> ) <br>
&nbsp;&nbsp;&nbsp;&nbsp;<i class=bn>|</i> MAX( <i class=bn>[</i>DISTINCT<i class=bn>]</i>
<a href="javascript:call_link('abenopen_sql_columns.html')" class="blue">col</a><i class=bn>|</i><a href="javascript:call_link('abapsql_expr.html')" class="blue">sql_exp</a> ) <br>
&nbsp;&nbsp;&nbsp;&nbsp;<i class=bn>|</i> MIN( <i class=bn>[</i>DISTINCT<i class=bn>]</i>
<a href="javascript:call_link('abenopen_sql_columns.html')" class="blue">col</a><i class=bn>|</i><a href="javascript:call_link('abapsql_expr.html')" class="blue">sql_exp</a> ) <br>
&nbsp;&nbsp;&nbsp;&nbsp;<i class=bn>|</i> SUM( <i class=bn>[</i>DISTINCT<i class=bn>]</i>
<a href="javascript:call_link('abenopen_sql_columns.html')" class="blue">col</a><i class=bn>|</i><a href="javascript:call_link('abapsql_expr.html')" class="blue">sql_exp</a> ) <br>
&nbsp;&nbsp;&nbsp;&nbsp;<i class=bn>|</i> COUNT( DISTINCT <a href="javascript:call_link('abenopen_sql_columns.html')" class="blue">col</a><i class=bn>|</i><a href="javascript:call_link('abapsql_expr.html')" class="blue">sql_exp</a> ) <br>
&nbsp;&nbsp;&nbsp;&nbsp;<i class=bn>|</i> COUNT( * ) <br>&nbsp;&nbsp;&nbsp;&nbsp;<i class=bn>|</i> COUNT(*) <i class=bn>}</i> ...</span> <br><br>
</P>
<p><span class="h4">
Effect
</span></p>
<P>
Aggregate expression for
</P>
<ul class="disc">
<li>
Specifies <a href="javascript:call_link('abapselect_clause_col_spec.html')" class="blue"><span class="qtext">col_spec</span></a>
for a column of the results set in the <a href="javascript:call_link('abapselect_list.html')" class="blue"><span class="qtext">SELECT</span> list</a> of a
<a href="javascript:call_link('abenquery_glosry.html')" class="grey" title="Glossary Entry">query</a>
<br><br></li>
<li>
Specifies an operand in the <a href="javascript:call_link('abaphaving_clause.html')" class="blue"><span class="qtext">HAVING</span> clause</a>.
<br></li>
</ul>
<P>
In an aggregate expression, a column <a href="javascript:call_link('abenopen_sql_columns.html')" class="blue"><span class="qtext">col</span></a> of a
<a href="javascript:call_link('abapselect_data_source.html')" class="blue">data source</a> or an SQL expression <a href="javascript:call_link('abapsql_expr.html')" class="blue">
<span class="qtext">sql_exp</span></a> is specified as an argument of one of the aggregate functions
shown here. Each aggregate function calculates a single value from the values of the column or from
the results of the SQL expression and from multiple rows as follows. Here, the addition <span class="qtext">DISTINCT</span> excludes duplicate values from the calculation:
</P>
<ul class="disc">
<li>
<span class="qtext">AVG( <i class=bn>[</i>DISTINCT<i class=bn>]</i> col <i class=bn>[</i><a href="javascript:call_link('abapselect_avg_as.html')" class="blue">AS dtype</a><i class=bn>]</i> )</span>
<br></li>
</ul>
<dl>

<dd>
Determines the average value of the contents of column <span class="qtext">col</span> in the results
set or in the current group. The data type of the column must be numeric. The data types DF16_RAW and
DF34_RAW and the obsolete types DF16_SCL and DF34_SCL are not allowed. Data type INT8 is only permitted
in conjunction with addition <a href="javascript:call_link('abapselect_avg_as.html')" class="blue"><span class="qtext">AS dtype</span></a>. The data type of the result for
<a href="javascript:call_link('abendecfloat_glosry.html')" class="grey" title="Glossary Entry">decimal floating point numbers</a>
is the corresponding data type (DF16_DEC or DF34_DEC) - otherwise the type is either FLTP, a platform-dependent
subtotal or it is determined by addition <a href="javascript:call_link('abapselect_avg_as.html')" class="blue"><span class="qtext">AS dtype</span></a>. SQL expressions cannot be specified as arguments. <br>
</dd>
</dl>
<ul class="disc">
<li>
<span class="qtext">MAX( <i class=bn>[</i>DISTINCT<i class=bn>]</i> col<i class=bn>|</i>sql_exp )</span> <br> <span class="qtext">MIN( <i class=bn>[</i>DISTINCT<i class=bn>]</i> col<i class=bn>|</i>sql_exp )</span>
<br></li>
</ul>
<dl>

<dd>
Determine the maximum value or minimum value of the values of the column <span class="qtext">col</span>
or of the results of the SQL expression <a href="javascript:call_link('abapsql_expr.html')" class="blue"><span class="qtext">sql_exp</span></a> in the results set or the current group. The data type of the result is the
<a href="javascript:call_link('abenexternal_data_type_glosry.html')" class="grey" title="Glossary Entry">external data type</a>
of the corresponding column or of the result of the SQL expression. A column with any data type can
be specified for <span class="qtext">col</span>. The result of an SQL expression <span class="qtext">sql_exp</span> must be a numeric type (except for the types for decimal floating point numbers). <br>
</dd>
</dl>
<ul class="disc">
<li>
<span class="qtext">SUM( <i class=bn>[</i>DISTINCT<i class=bn>]</i> col<i class=bn>|</i>sql_exp )</span>
<br></li>
</ul>
<dl>

<dd>
Determines the total of the content of the column <span class="qtext">col</span> or of the results of
the SQL expression <a href="javascript:call_link('abapsql_expr.html')" class="blue"><span class="qtext">sql_exp</span></a> in the results set or the current group. The data type of the result is the
<a href="javascript:call_link('abenexternal_data_type_glosry.html')" class="grey" title="Glossary Entry">external data type</a>
of the corresponding column or of the result of the SQL expression. The data type of the column <span class="qtext">
col</span> must be a numeric type. The data types DF16_RAW and DF34_RAW and the obsolete types DF16_SCL
and DF34_SCL are not allowed. The result of an SQL expression <span class="qtext">sql_exp</span> must be a numeric type (except for the types for decimal floating point numbers). <br>
</dd>
</dl>
<ul class="disc">
<li>
<span class="qtext">COUNT( DISTINCT col<i class=bn>|</i>sql_exp )</span>
<br></li>
</ul>
<dl>

<dd>
Determines the number of distinct values in the column <span class="qtext">col</span> or of the results
of the SQL expression <a href="javascript:call_link('abapsql_expr.html')" class="blue"><span class="qtext">sql_exp</span></a>
in the results set or the current group. The data type of the result is INT4. A column with any data
type can be specified for <span class="qtext">col</span>. An SQL expression <span class="qtext">sql_exp</span> can be a result with any type (except for the types for decimal floating point numbers). <br>
</dd>
</dl>
<ul class="disc">
<li>
<span class="qtext">COUNT( * )</span> <br><span class="qtext">COUNT( * )</span>
<br></li>
</ul>
<dl>

<dd>
Determines the number of rows in the results set or in the current group. No column identifier is specified in this case.
</dd>
</dl>
<ul class="circlem2">
<li>If <span class="qtext">COUNT( * )</span> or <span class="qtext">COUNT(*)</span> is specified in
a <span class="qtext">SELECT</span> list with other columns or together with a <a href="javascript:call_link('abapgroupby_clause.html')" class="blue">
<span class="qtext">GROUP BY</span></a> clause, the data type of the result is INT4 and no numbers greater than 2147483647 can be determined.</li>
</ul>
<ul class="circlem2">
<li>If <span class="qtext">COUNT( * )</span> or <span class="qtext">COUNT(*)</span> is specified as
the only column and the <a href="javascript:call_link('abapgroupby_clause.html')" class="blue"><span class="qtext">GROUP BY</span></a>
clause is not specified, the internal data type of the result is INT8 and numbers up to +9223372036854775807
can be determined. The system field <span class="qtext">sy-dbcnt</span> is set to the value -1 in results outside of the value range of the type <span class="qtext">i</span>.</li>
</ul>
<P>
 If the value of an aggregate expression is too large for the
<a href="javascript:call_link('abapinto_clause.html')" class="blue">target area</a>, an exception is raised. More specifically,
a target object of the type <span class="qtext">p</span> or <span class="qtext">decfloat34</span> must be specified if a standalone function <span class="qtext">COUNT( *
)</span> or <span class="qtext">COUNT(*)</span> expects a value greater than the value range of INT4.
</P>
<P>
If the argument of an aggregate function has the <a href="javascript:call_link('abennull_value_glosry.html')" class="grey" title="Glossary Entry">
null value</a>, it is ignored when the function is evaluated. The result is a null value only if all the rows in the column in question contain a null value. <br><br>
</P>
<p><span class="h4">
Notes
</span></p>
<ul class="disc">
<li>
The database platform determines whether an overflow occurs if the result of an aggregate function exceeds
its value range. On some database platforms, intermediate results outside the value range are allowed.
The overflow behavior of SQL expressions, on the other hand, is platform-independent. An aggregate expression
with an SQL expression raises an exception on every platform in the case of an overflow, even if a corresponding result of the aggregate function would not raise an exception on every platform.
<br><br></li>
<li>
The result of the aggregate functions <span class="qtext">AVG</span> in data type FLTP is platform-dependent.
The type of platform also determines whether the result of an aggregate expression <span class="qtext">AVG</span>,
which is used in a <span class="qtext">HAVING</span> clause as a subtotal, is of type FLTP. Addition
<a href="javascript:call_link('abapselect_avg_as.html')" class="blue"><span class="qtext">AS dtype</span></a> can be used to force the type FLTP.
<br><br></li>
<li>
If the aggregate function <span class="qtext">SUM</span> is used for columns of type DF16_DEC, it is best to use a target field of data type <span class="qtext">decfloat34</span> to avoid overflows.
<br><br></li>
<li>
If required, columns can be specified as <span class="qtext">col</span> using a <a href="javascript:call_link('abenopen_sql_path.html')" class="blue">path expression</a> for associations of a CDS view.
<br><br></li>
<li>
If SQL expressions are specified as arguments of aggregate expressions, the syntax check is performed in a
<a href="javascript:call_link('abenopensql_strict_mode_740_sp08.html')" class="blue">strict mode</a>, which handles the statement more strictly than the regular syntax check. <br><br>
<br></li>
</ul>
<p><span class="h4">
Example
</span></p>
<P>
Determines the number of airlines flying to New York.
</P>
<p class="qtextml1">
<span class="qtext">
DATA count TYPE i. <br> <br>SELECT COUNT( DISTINCT carrid ) <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; FROM spfli <br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; WHERE cityto = 'NEW YORK' <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; INTO @count. <br><br>
</span>
</p>
<p><span class="h4">
Example
</span></p>
<P>
Returns the flight date, the number of passengers, and the average and maximum luggage weight of all Lufthansa flights with the flight number 0400.
</P>
<p class="qtextml1">
<span class="qtext">
TYPES: BEGIN OF wa, <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;fldate LIKE sbook-fldate, <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;count&nbsp;&nbsp;TYPE i, <br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;avg&nbsp;&nbsp;&nbsp;&nbsp;TYPE p DECIMALS 2, <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;max&nbsp;&nbsp;&nbsp;&nbsp;TYPE p DECIMALS 2, <br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;END OF wa. <br>DATA&nbsp;&nbsp;itab TYPE TABLE OF wa WITH EMPTY KEY. <br>
 <br>SELECT fldate, COUNT( * ), AVG( luggweight ), MAX( luggweight ) <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; FROM sbook <br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; WHERE carrid = 'LH' AND <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; connid = '0400' <br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; GROUP BY fldate <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; INTO TABLE @itab. <br> <br>cl_demo_output=>display( itab ).
</span>
</p>
<p><span class="h4">
Executable Example
</span></p>
<p>
<a href="javascript:call_link('abensql_expr_in_aggregates_abexa.html')" class="blue">SQL Expressions, Use in Aggregate Expressions</a> <br><br>
</p>
<br>
<br>
<!-- POSTFIX --><span class="h4">Continue</span><br>
<a href="javascript:call_link('abapselect_avg_as.html')" class="blue">SELECT - AVG, AS</a><br>
<br>
<br>
</DIV>
<fieldset style="opacity:0">
<input id="url" type="text" />
</fieldset>
</BODY>

<!-- Mirrored from help.sap.com/doc/abapdocu_751_index_htm/7.51/en-US/abapselect_aggregate.htm by HTTrack Website Copier/3.x [XR&CO'2014], Thu, 20 Jan 2022 17:43:11 GMT -->
</html>
