<!doctype HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html lang="EN">
<!-- ABAPMODIFY_SOURCE -->

<!-- Mirrored from help.sap.com/doc/abapdocu_751_index_htm/7.51/en-US/abapmodify_source.htm by HTTrack Website Copier/3.x [XR&CO'2014], Thu, 20 Jan 2022 17:43:22 GMT -->
<head>
<meta http-equiv="content-type" content="text/html; charset=utf-8">
<meta name="author" content="SAP">
<meta name="description" content="MODIFY dbtab - source">
<title>
MODIFY dbtab - source - ABAP Keyword Documentation
</title>
<link rel="icon" href="ABAPIcon.ico" type="image/ico">
<link rel="shortcut icon" href="ABAPIcon.ico">
<LINK rel="stylesheet" href="abap_docu.css" type="text/css">
<script type="text/JavaScript">
function call_link(linked_file)
{
   if(parent.frames.length>0){
     parent.window.frames["basefrm"].window.location = linked_file;
     parent.window.frames["treeframe"].window.location = "abap_docu_tree92bd.html?file=" + linked_file;}
   else {
     window.location = linked_file;}
}
function urlToClipboard(id){
 try{ var loc = top.location.href;}
 catch(e){ alert( "URL cannnot be determined" ); return; }
 var field = document.getElementById(id);
 field.focus();
 if ( loc.search( ".htm" ) == -1 && loc.search( ".HTM" ) == -1  ){ loc = loc + "index.htm"; }
 if (   loc.search( "index.html" ) != -1
     || loc.search( "INDEX-2.html" ) != -1 ){
   var off = loc.search( "file=" );
   if ( off == -1  ){
     field.value = loc + "?file=abapmodify_source.htm"; }
   else {
     field.value = loc.substring( 0, off ) + "file=abapmodify_source.htm";
   }
 }
 else {
    field.value = loc; }
 field.setSelectionRange(0, field.value.length);
 var r = confirm( "Copy URL to clipboard?\n\n" + field.value + "\n\nCopy to clipboard does not work in all browsers." );
 if (r == true) {
   try{
     document.execCommand("copy");
   }
     catch(e){ alert( "URL could not be copied to clipboard" ); }
 }
 window.scrollTo(0,0);
}
</script>
</head>
<body>
<div class="all">
<p class="copyright">SAP NetWeaver AS ABAP Release 751, &copy;Copyright 2017 SAP AG. All rights reserved.
&nbsp;<input type="button" value="URL" style="font-size:8px; width:26px; height:16px; padding:0"
 onclick="urlToClipboard('url')" title="Copy URL to Clipboard" >
</p>
<span class="path">
<a href="javascript:call_link('abenabap.html')" class="blue">ABAP - Keyword Documentation</a>&nbsp;&rarr;&nbsp;
<a href="javascript:call_link('abenabap_reference.html')" class="blue">ABAP - Reference</a>&nbsp;&rarr;&nbsp;
<a href="javascript:call_link('abenabap_language_external_data.html')" class="blue">Processing External Data</a>&nbsp;&rarr;&nbsp;
<a href="javascript:call_link('abenabap_sql.html')" class="blue">ABAP Database Accesses</a>&nbsp;&rarr;&nbsp;
<a href="javascript:call_link('abenopensql.html')" class="blue">Open SQL</a>&nbsp;&rarr;&nbsp;
<a href="javascript:call_link('abenopen_sql_writing.html')" class="blue">Open SQL - Write Accesses</a>&nbsp;&rarr;&nbsp;
<a href="javascript:call_link('abapmodify_dbtab.html')" class="blue">MODIFY dbtab</a>&nbsp;&rarr;&nbsp;
</span>
<p><span class="h1">
MODIFY dbtab - source <br><br>
</span></p>
<P>
<a href="javascript:call_link('abapmodify_dbtab_shortref.html')" class="blue">Quick Reference</a> <br><br>
</P>
<p><span class="h2">
<span class="bold">Syntax</span>
</span></p>
<P>
<span class="qtext">... @wa<i class=bn>|</i><i class=bn>{</i>TABLE @itab<i class=bn>}</i> ...</span> <br><br>
</P>
<p><span class="h2">
Alternatives:
</span></p>
<P>
   <A HREF="#!ABAP_ALTERNATIVE_1@1@" class="blue"> 1. <span class="qtext">...&nbsp;&nbsp;@wa</span> </A> <br><br><A HREF="#!ABAP_ALTERNATIVE_2@2@" class="blue"> 2. <span class="qtext">... TABLE @itab</span> </A> <br><br>
</P>
<p><span class="h4">
Effect
</span></p>
<P>
A non-table-like data object <span class="qtext">wa</span> or an internal table <span class="qtext">itab</span> can be specified as a
<a href="javascript:call_link('abenopen_sql_host_variables.html')" class="blue">host variable</a> or
<a href="javascript:call_link('abenopen_sql_host_expressions.html')" class="blue">host expression</a> after <span class="qtext">FROM</span>
in the statement <a href="javascript:call_link('abapmodify_dbtab.html')" class="blue"><span class="qtext">MODIFY</span></a>.
On the one hand the content of the data objects determines whether the row(s) are inserted or changed,
and on the other hand, which values are inserted or used for changes. The escape character <span class="qtext">@</span> should precede the work area name or the internal table name (as should be the case with every
<a href="javascript:call_link('abenopen_sql_host_variables.html')" class="blue">host variable</a>).
</P>
<p><span class="h4">
Note
</span></p>
<P>
Host variables without the escape character <span class="qtext">@</span> are
<a href="javascript:call_link('abenopen_sql_hostvar_obsolete.html')" class="blue">obsolete</a>. The escape character <span class="qtext">@</span> must be specified in the
<a href="javascript:call_link('abenopensql_strict_modes.html')" class="blue">strict modes</a> of the syntax check from Release 7.40, SP05. <br><br>
</P>
<p><span class="h2">
<A NAME="!ABAP_ALTERNATIVE_1@1@"></A> <span class="bold">Alternative 1</span>
</span></p>
<P>
<span class="qtext">...&nbsp;&nbsp;@wa</span> <br><br><br><!-- /A -->
</P>
<p><span class="h4">
Effect
</span></p>
<P>
When a non-table-like work area <span class="qtext">wa</span> that meets the
<a href="javascript:call_link('abenopen_sql_wa.html')" class="blue">requirements</a> for use in Open SQL statements is specified as a
<a href="javascript:call_link('abenopen_sql_host_variables.html')" class="blue">host variable</a> or
<a href="javascript:call_link('abenopen_sql_host_expressions.html')" class="blue">host expression</a>, a row is found in the database table that has the same content in the
<a href="javascript:call_link('abenprimary_key_glosry.html')" class="grey" title="Glossary Entry">primary key</a> as the corresponding initial part of the work area.
</P>
<ul class="disc">
<li>
If a row like this is found, this row is overwritten in accordance with the same rules as for the statement <a href="javascript:call_link('abapupdate_source.html')" class="blue"><span class="qtext">UPDATE</span></a>.
<br><br></li>
<li>
If a row like this is not found, a new row is inserted according to the same rules as for the statement <a href="javascript:call_link('abapinsert_source.html')" class="blue"><span class="qtext">INSERT</span></a>.
<br></li>
</ul>
<P>
If the change would produce a duplicate entry in a unique secondary index, it is not executed and <span class="qtext">sy-subrc</span> is set to 4.
</P>
<P>
By default, an automatic client handling is performed, which means that any
<a href="javascript:call_link('abenclient_identifier_glosry.html')" class="grey" title="Glossary Entry">client identifier</a>
specified in <span class="qtext">wa</span> is ignored and the current client is used instead. The content
of <span class="qtext">wa</span> is not affected. Automatic client handling can be switched off using the addition <a href="javascript:call_link('abapmodify_target.html')" class="blue"><span class="qtext">CLIENT SPECIFIED</span></a>.
</P>
<p><span class="h4">
Notes
</span></p>
<ul class="disc">
<li>
The <span class="qtext">wa</span> work area should always be declared with reference to the database table or the
<a href="javascript:call_link('abenview_glosry.html')" class="grey" title="Glossary Entry">view</a> in ABAP Dictionary. For the derivation of
<a href="javascript:call_link('abenlob_handle_structure_glosry.html')" class="grey" title="Glossary Entry">LOB handle structures</a>, there are special
<a href="javascript:call_link('abaptypes_lob_handle.html')" class="blue">additions</a> of the statements <span class="qtext">TYPES</span> and <span class="qtext"><i class=bn>[</i>CLASS-<i class=bn>]</i>DATA</span>.
<br><br></li>
<li>
If a <a href="javascript:call_link('abenconstructor_expression_glosry.html')" class="grey" title="Glossary Entry">constructor expression</a> is specified as a
<a href="javascript:call_link('abenopen_sql_host_expressions.html')" class="blue">host expression</a> for the work area <span class="qtext">
wa</span>, for which the data type is inferred using the <span class="qtext">#</span> character, a structure consisting of all the database table columns is created as the type.
<br><br></li>
<li>
If the database table or view is specified statically, a
<a href="javascript:call_link('abapmodify_obsolete.html')" class="blue">short form</a> can be specified outside of classes. This means that the work area specified using <span class="qtext">FROM</span> wa can be omitted. The prerequisite is that a
<a href="javascript:call_link('abentable_work_area_glosry.html')" class="grey" title="Glossary Entry">table work area</a> <span class="qtext">
dbtab</span> for the respective database table or the view is declared using the statement <span class="qtext">TABLES</span>.
The system enhances the <span class="qtext">MODIFY</span> statement implicitly with the addition <span class="qtext">FROM dbtab</span>. <br><br>
<br></li>
</ul>
<p><span class="h4">
Example
</span></p>
<P>

</P>
<P>
Create or change a <a href="javascript:call_link('abenmessage_glosry.html')" class="grey" title="Glossary Entry">message</a>
in database table <span class="lnkgrey">T100</span>. If there is no message with the number 100 in the MYMSGCLASS message class in English, it will be created. Otherwise only the text is changed.
</P>
<p class="qtextml1">
<span class="qtext">
DATA message_wa TYPE t100. <br> <br>message_wa-sprsl = 'EN'. <br>message_wa-arbgb = 'MYMSGCLASS'. <br>message_wa-msgnr =&nbsp;&nbsp;'100'. <br>
message_wa-text =&nbsp;&nbsp;'Some new message ...'. <br> <br>MODIFY t100 FROM @message_wa.
</span>
</p>
<p><span class="h4">
Example
</span></p>
<P>
The same example as before, but with a host expression.
</P>
<p class="qtextml1">
<span class="qtext">
MODIFY t100 FROM @( VALUE #( <br>&nbsp;&nbsp;sprsl = 'EN' <br>&nbsp;&nbsp;arbgb = 'MYMSGCLASS' <br>&nbsp;&nbsp;msgnr =&nbsp;&nbsp;'100' <br>&nbsp;&nbsp;text =&nbsp;&nbsp;'Some new message ...'&nbsp;&nbsp;) ). <br><br>
</span>
</p>
<A NAME="@@TABLE@@MODIFY dbtab@@"></A>
<p><span class="h2">
<A NAME="!ABAP_ALTERNATIVE_2@2@"></A> <span class="bold">Alternative 2</span>
</span></p>
<P>
<span class="qtext">... TABLE @itab</span> <br><br><br><!-- /A -->
</P>
<p><span class="h4">
Effect
</span></p>
<P>
When an internal table <span class="qtext">itab</span> is specified as a
<a href="javascript:call_link('abenopen_sql_host_variables.html')" class="blue">host variable</a> or
<a href="javascript:call_link('abenopen_sql_host_expressions.html')" class="blue">host expressions</a>, its rows are evaluated to overwrite existing rows or to insert new rows. The row type of the internal table must meet the
<a href="javascript:call_link('abenopen_sql_wa.html')" class="blue">prerequisites</a> for use in Open SQL statements.
</P>
<P>
This behavior is platform-dependent and uses one of the following patterns (depending on the database system):
</P>
<ul class="disc">
<li>
<span class="qtext">UPDATE</span> followed by <span class="qtext">INSERT</span> (<span class="qtext400">UPSERT</span>):
<br></li>
</ul>
<ul class="circlem2">
<li>First, the same function as for <a href="javascript:call_link('abapupdate_source.html')" class="blue"><span class="qtext">UPDATE FROM TABLE</span></a> is executed for all rows of the internal table.</li>
</ul>
<ul class="circlem2">
<li>Next, the same function as for <a href="javascript:call_link('abapinsert_source.html')" class="blue"><span class="qtext">INSERT FROM TABLE</span></a> is executed for all rows. Here, any rows that have the same
<a href="javascript:call_link('abenprimary_key_glosry.html')" class="grey" title="Glossary Entry">primary key</a> or unique
<a href="javascript:call_link('abensecondary_index_glosry.html')" class="grey" title="Glossary Entry">secondary index</a> are ignored.</li>
</ul>
<dl>

<dd>
Depending on the database system, the processing of the rows in the internal table can also be split into blocks here.
</dd>
</dl>
<ul class="disc">
<li>
Row by row <span class="qtext">MODIFY</span>
<br></li>
</ul>
<dl>

<dd>
In a loop, each row in the internal table is edited in accordance with the rule above for <span class="qtext">MODIFY
... FROM wa</span>. Here, the database system specifies whether processing continues in cases where a row cannot be inserted due to a unique secondary index.
</dd>
</dl>
<P>
These two platform-dependent processing methods can produce different results in cases where the database table has unique secondary indexes.
</P>
<P>
If the change to a row in the internal table would produce a duplicate entry in a unique secondary index,
the corresponding row is not inserted and <span class="qtext">sy-subrc</span> is set to 4. If the internal
table is empty, no rows are processed. However <span class="qtext">sy-subrc</span> is still set to 0. The system field <span class="qtext">sy-dbcnt</span> is set to the number of rows that are actually processed.
</P>
<p><span class="h4">
Notes
</span></p>
<ul class="disc">
<li>
To prevent platform-dependent behavior, <span class="qtext">MODIFY ... FROM itab</span> should only
be applied to database tables without unique secondary indexes. If not, the required behavior must be
programmed explicitly using <span class="qtext">UPDATE</span> and <span class="qtext">INSERT</span> or using <span class="qtext">LOOP AT itab</span> and <span class="qtext">MODIFY</span>.
<br><br></li>
<li>
If a <a href="javascript:call_link('abenconstructor_expression_glosry.html')" class="grey" title="Glossary Entry">constructor expression</a> as a
<a href="javascript:call_link('abenopen_sql_host_expressions.html')" class="blue">host expression</a> is specified as an internal
table <span class="qtext">itab</span>, for which the data type is inferred using the <span class="qtext">#</span>
character, a structured standard table (whose row type consists of all the database table columns) with an empty table key is created as the type.
<br><br></li>
<li>
When an internal table is specified, <a href="javascript:call_link('abenlocator_glosry.html')" class="grey" title="Glossary Entry">locators</a> can be used as a source, but no
<a href="javascript:call_link('abenwriter_stream_glosry.html')" class="grey" title="Glossary Entry">writer streams</a> can be created.
<br></li>
</ul>
<p><span class="h4">
Executable Example
</span></p>
<P>
<a href="javascript:call_link('abenbulk_modify_abexa.html')" class="blue"><span class="qtext">MODIFY FROM TABLE</span></a>
</P>
<br>
<br>
<br>
<br>
</DIV>
<fieldset style="opacity:0">
<input id="url" type="text" />
</fieldset>
</BODY>

<!-- Mirrored from help.sap.com/doc/abapdocu_751_index_htm/7.51/en-US/abapmodify_source.htm by HTTrack Website Copier/3.x [XR&CO'2014], Thu, 20 Jan 2022 17:43:23 GMT -->
</html>
