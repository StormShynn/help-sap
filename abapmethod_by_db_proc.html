<!doctype HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html lang="EN">
<!-- ABAPMETHOD_BY_DB_PROC -->

<!-- Mirrored from help.sap.com/doc/abapdocu_751_index_htm/7.51/en-US/abapmethod_by_db_proc.htm by HTTrack Website Copier/3.x [XR&CO'2014], Thu, 20 Jan 2022 17:43:31 GMT -->
<head>
<meta http-equiv="content-type" content="text/html; charset=utf-8">
<meta name="author" content="SAP">
<meta name="description" content="METHOD - BY DATABASE PROCEDURE, FUNCTION">
<title>
METHOD - BY DATABASE PROCEDURE, FUNCTION - ABAP Keyword Documentation
</title>
<link rel="icon" href="ABAPIcon.ico" type="image/ico">
<link rel="shortcut icon" href="ABAPIcon.ico">
<LINK rel="stylesheet" href="abap_docu.css" type="text/css">
<script type="text/JavaScript">
function call_link(linked_file)
{
   if(parent.frames.length>0){
     parent.window.frames["basefrm"].window.location = linked_file;
     parent.window.frames["treeframe"].window.location = "abap_docu_tree92bd.html?file=" + linked_file;}
   else {
     window.location = linked_file;}
}
function urlToClipboard(id){
 try{ var loc = top.location.href;}
 catch(e){ alert( "URL cannnot be determined" ); return; }
 var field = document.getElementById(id);
 field.focus();
 if ( loc.search( ".htm" ) == -1 && loc.search( ".HTM" ) == -1  ){ loc = loc + "index.htm"; }
 if (   loc.search( "index.html" ) != -1
     || loc.search( "INDEX-2.html" ) != -1 ){
   var off = loc.search( "file=" );
   if ( off == -1  ){
     field.value = loc + "?file=abapmethod_by_db_proc.htm"; }
   else {
     field.value = loc.substring( 0, off ) + "file=abapmethod_by_db_proc.htm";
   }
 }
 else {
    field.value = loc; }
 field.setSelectionRange(0, field.value.length);
 var r = confirm( "Copy URL to clipboard?\n\n" + field.value + "\n\nCopy to clipboard does not work in all browsers." );
 if (r == true) {
   try{
     document.execCommand("copy");
   }
     catch(e){ alert( "URL could not be copied to clipboard" ); }
 }
 window.scrollTo(0,0);
}
</script>
</head>
<body>
<div class="all">
<p class="copyright">SAP NetWeaver AS ABAP Release 751, &copy;Copyright 2017 SAP AG. All rights reserved.
&nbsp;<input type="button" value="URL" style="font-size:8px; width:26px; height:16px; padding:0"
 onclick="urlToClipboard('url')" title="Copy URL to Clipboard" >
</p>
<span class="path">
<a href="javascript:call_link('abenabap.html')" class="blue">ABAP - Keyword Documentation</a>&nbsp;&rarr;&nbsp;
<a href="javascript:call_link('abenabap_reference.html')" class="blue">ABAP - Reference</a>&nbsp;&rarr;&nbsp;
<a href="javascript:call_link('abenabap_language_external_data.html')" class="blue">Processing External Data</a>&nbsp;&rarr;&nbsp;
<a href="javascript:call_link('abenabap_sql.html')" class="blue">ABAP Database Accesses</a>&nbsp;&rarr;&nbsp;
<a href="javascript:call_link('abennative_sql.html')" class="blue">Native SQL</a>&nbsp;&rarr;&nbsp;
<a href="javascript:call_link('abenamdp.html')" class="blue">AMDP - ABAP Managed Database Procedures</a>&nbsp;&rarr;&nbsp;
<a href="javascript:call_link('abenamdp_methods.html')" class="blue">AMDP - Methods</a>&nbsp;&rarr;&nbsp;
</span>
<A NAME="@@BY DATABASE PROCEDURE@@METHOD@@"></A>
<A NAME="@@BY DATABASE FUNCTION@@METHOD@@"></A>
<p><span class="h1">
METHOD - BY DATABASE PROCEDURE, FUNCTION <br><br>
</span></p>
<p><span class="h2">
<span class="bold">Syntax</span>
</span></p>
<P>
<span class="qtext">METHOD meth BY DATABASE PROCEDURE<i class=bn>|</i>FUNCTION <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;FOR db <br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;LANGUAGE db_lang <br>&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<i class=bn>[</i>OPTIONS db_options<i class=bn>]</i> <br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<i class=bn>[</i>USING&nbsp;&nbsp; db_entities<i class=bn>]</i>. <br>&nbsp;&nbsp;... <br>ENDMETHOD.</span> <br><br>
</P>
<p><span class="h3">
Extras:
</span></p>
<P>
   <A HREF="#!ABAP_ADDITION_1@1@" class="blue"> 1. <span class="qtext">... FOR db</span> </A> <br><br><A HREF="#!ABAP_ADDITION_2@2@" class="blue">
 2. <span class="qtext">... LANGUAGE db_lang</span> </A> <br><br><A HREF="#!ABAP_ADDITION_3@3@" class="blue"> 3. <span class="qtext">... OPTIONS db_options</span> </A> <br>
<br><A HREF="#!ABAP_ADDITION_4@4@" class="blue"> 4. <span class="qtext">... USING db_entities</span> </A> <br><br>
</P>
<p><span class="h4">
Effect
</span></p>
<P>
Implements an <a href="javascript:call_link('abenamdp_procedure_glosry.html')" class="grey" title="Glossary Entry">AMDP procedure</a> or an
<a href="javascript:call_link('abenamdp_function_glosry.html')" class="grey" title="Glossary Entry">AMDP function</a> in an
<a href="javascript:call_link('abenamdp_class_glosry.html')" class="grey" title="Glossary Entry">AMDP class</a>. The addition <span class="qtext">BY DATABASE PROCEDURE</span> or <span class="qtext">BY DATABASE FUNCTION</span> can be specified in the
<a href="javascript:call_link('abenimplementation_part_glosry.html')" class="grey" title="Glossary Entry">implementation part</a> of a
<a href="javascript:call_link('abenglobal_class_glosry.html')" class="grey" title="Glossary Entry">global class</a> that contains an appropriate tag interface IF_AMDP_MARKER_db.
</P>
<ul class="disc">
<li>
The addition <span class="qtext">BY DATABASE PROCEDURE</span> defines an
<a href="javascript:call_link('abenamdp_procedure_methods.html')" class="blue">AMDP procedure implementation</a> for implementing a
<a href="javascript:call_link('abendatabase_procedure_glosry.html')" class="grey" title="Glossary Entry">database procedure</a>.
<br><br></li>
<li>
The addition <span class="qtext">BY DATABASE FUNCTION</span> defines an
<a href="javascript:call_link('abenamdp_function_methods.html')" class="blue">AMDP function implementation</a> for implementing a <a href="javascript:call_link('abendatabase_function_glosry.html')" class="grey" title="Glossary Entry">database function</a>.
<br></li>
</ul>
<P>
The parameter interface of the method declared in the
<a href="javascript:call_link('abendeclaration_section_glosry.html')" class="grey" title="Glossary Entry">declaration part</a> must meet the prerequisites for
<a href="javascript:call_link('abenamdp_procedure_methods.html')" class="blue">AMDP procedure implementations</a> or
<a href="javascript:call_link('abenamdp_function_methods.html')" class="blue">AMDP function implementations</a>. The parameter interface of an AMDP function implementation that implements a
<a href="javascript:call_link('abencds_table_function_glosry.html')" class="grey" title="Glossary Entry">CDS table function</a>
is taken from the definition of the CDS table function specified after the addition <a href="javascript:call_link('abapclass-methods_for_tabfunc.html')" class="blue">
<span class="qtext">FOR TABLE FUNCTION</span></a> in the declaration of the method.
</P>
<P>
The addition <span class="qtext">FOR db</span> defines the database system where the method is used.
The addition <span class="qtext">LANGUAGE</span> defines the database-specific language in which the
method is implemented. <span class="qtext">OPTIONS</span> is used to specify database-specific options.
<span class="qtext">USING</span> is used to declare database objects managed by ABAP that are used in the AMDP method.
</P>
<p><span class="h4">
Note
</span></p>
<P>
If the current AS ABAP does not have sufficient authorizations to manage database procedures in its
database system, syntax errors can occur in AMDP methods. Missing authorizations can be detected using transaction <span class="lnkgrey">SICK</span>.
</P>
<p><span class="h4">
Executable Examples
</span></p>
<P>
<a href="javascript:call_link('abenamdp_abexas.html')" class="blue">AMDP - Examples</a> <br><br>
</P>
<A NAME="@@FOR HDB@@METHOD BY DATABASE PROCEDURE@@"></A>
<A NAME="@@FOR HDB@@METHOD BY DATABASE FUNCTION@@"></A>
<p><span class="h3">
<A NAME="!ABAP_ADDITION_1@1@"></A> <span class="bold">Addition 1</span>
</span></p>
<P>
<span class="qtext">... FOR db</span>   <br><!-- /A -->
</P>
<p><span class="h4">
Effect
</span></p>
<P>
Defines the database system for which the AMDP method is used. The AMDP class must contain the appropriate
tag interface. The following table shows the syntax that can be specified for <span class="qtext">db</span>, the database system it identifies, and the required tag interface.
</P>
<table border>
<tr>
<td><span class="qtext">db</span></td>
<td><span class="bold">Database System</span></td>
<td><span class="bold">Tag Interface</span></td>
</tr>
<tr>
<td><span class="qtext">HDB</span></td>
<td>SAP HANA database</td>
<td><span class="lnkgrey">IF_AMDP_MARKER_HDB</span></td>
</tr>
</table><br>
<P>
The AMDP method can only be called in an AS ABAP whose central database is managed by the specified database system; otherwise a runtime error is produced.
</P>
<p><span class="h4">
Notes
</span></p>
<ul class="disc">
<li>
An AMDP class can contain multiple tag interfaces for different database systems for implementing AMDP methods in various languages.
<br><br></li>
<li>
Additional regular methods can be provided to make an AMDP class with
<a href="javascript:call_link('abenamdp_procedure_methods.html')" class="blue">AMDP procedure implementations</a> public. These
methods call the AMDP methods as specified by the database system of the current central AS ABAP database.
In database systems that do not support AMDP, an alternative implementation in Open SQL or Native SQL can be created in regular methods. <br><br>
<br></li>
</ul>
<A NAME="@@LANGUAGE SQLSCRIPT@@METHOD BY DATABASE PROCEDURE@@"></A>
<A NAME="@@LANGUAGE SQLSCRIPT@@METHOD BY DATABASE FUNCTION@@"></A>
<A NAME="@@LANGUAGE LLANG@@METHOD BY DATABASE PROCEDURE@@"></A>
<p><span class="h3">
<A NAME="!ABAP_ADDITION_2@2@"></A> <span class="bold">Addition 2</span>
</span></p>
<P>
<span class="qtext">... LANGUAGE db_lang</span>   <br><!-- /A -->
</P>
<p><span class="h4">
Effect
</span></p>
<P>
Defines the database-specific language in which the AMDP is implemented. The following table shows the
syntax for <span class="qtext">db_lang</span> used to specify the language (depending on the specified database system <span class="qtext">db</span>), the meaning, and a link to further information.
</P>
<table border>
<tr>
<td><span class="qtext">db</span></td>
<td><span class="qtext">db_lang</span></td>
<td><span class="bold">Language</span></td>
<td><span class="bold">More Information</span></td>
</tr>
<tr>
<td><span class="qtext">HDB</span></td>
<td><span class="qtext">SQLSCRIPT</span></td>
<td><a href="javascript:call_link('abensql_script_glosry.html')" class="grey" title="Glossary Entry">SQLScript</a></td>
<td><a href="javascript:call_link('abenamdp_hdb_sqlscript.html')" class="blue">SQLScript for the SAP HANA database</a></td>
</tr>
<tr>
<td><span class="qtext">HDB</span></td>
<td><span class="qtext">LLANG</span></td>
<td><a href="javascript:call_link('abenllang_glosry.html')" class="grey" title="Glossary Entry">L</a></td>
<td><a href="javascript:call_link('abenamdp_hdb_l_internal.html')" class="blue">L for the SAP HANA database</a> (for internal SAP use only and only for
<a href="javascript:call_link('abenamdp_procedure_methods.html')" class="blue">AMDP procedure implementations</a>)</td>
</tr>
</table><br>
<P>
If possible, the ABAP syntax check examines the implementation of the method for the specified language.
This is possible only if the check takes place on an AS ABAP whose central database is managed by the
specified database system. The check is performed with respect to the currently installed version of the database. No checks take place on an AS ABAP with a different database system. <br><br>
</P>
<A NAME="@@OPTIONS READ-ONLY@@METHOD BY DATABASE PROCEDURE@@"></A>
<A NAME="@@OPTIONS SUPPRESS SYNTAX ERRORS@@METHOD BY DATABASE PROCEDURE@@"></A>
<A NAME="@@OPTIONS READ-ONLY@@METHOD BY DATABASE FUNCTION@@"></A>
<A NAME="@@OPTIONS SUPPRESS SYNTAX ERRORS@@METHOD BY DATABASE FUNCTION@@"></A>
<p><span class="h3">
<A NAME="!ABAP_ADDITION_3@3@"></A> <span class="bold">Addition 3</span>
</span></p>
<P>
<span class="qtext">... OPTIONS db_options</span>   <br><!-- /A -->
</P>
<p><span class="h4">
Effect
</span></p>
<P>
Specifies database-specific options for the AMDP procedure or function. The following tables shows the
syntax for <span class="qtext">option</span> as specified by the database system in question, <span class="qtext">db</span> and the associated meaning.
</P>
<table border>
<tr>
<td><span class="qtext">db</span></td>
<td><span class="qtext">option</span></td>
<td><span class="bold">Meaning</span></td>
</tr>
<tr>
<td><span class="qtext">HDB</span></td>
<td><span class="qtext">READ-ONLY</span></td>
<td>Only reads are permitted on the database tables in the database procedure.</td>
</tr>
<tr>
<td><span class="qtext">HDB</span></td>
<td><span class="qtext">SUPPRESS SYNTAX ERRORS</span></td>
<td>For internal use at SAP only: If the AMDP procedure accesses database objects not managed by ABAP
that do not exist at the time of the syntax check, only syntax warnings are raised and not syntax errors. If a required object is missing at runtime, a
<a href="javascript:call_link('abenamdp_exceptions.html')" class="blue">catchable exception is raised</a>.</td>
</tr>
</table><br>
<P>
These options are optional, with the following exception: The addition <span class="qtext">OPTIONS READ-ONLY</span> must be specified in the implementation of an
<a href="javascript:call_link('abenamdp_function_glosry.html')" class="grey" title="Glossary Entry">AMDP function</a> or an <a href="javascript:call_link('abenamdp_hdb_l_internal.html')" class="blue">L procedure</a>.
</P>
<P>
The syntax check examines the specified options at runtime.
</P>
<p><span class="h4">
Note
</span></p>
<P>
The option <span class="qtext">SUPPRESS SYNTAX ERRORS</span> is not applied to database objects managed by ABAP that are specified after <span class="qtext">USING</span>. <br><br>
</P>
<A NAME="@@USING@@METHOD BY DATABASE PROCEDURE@@"></A>
<A NAME="@@USING@@METHOD BY DATABASE FUNCTION@@"></A>
<p><span class="h3">
<A NAME="!ABAP_ADDITION_4@4@"></A> <span class="bold">Addition 4</span>
</span></p>
<P>
<span class="qtext">... USING db_entities</span>   <br><!-- /A -->
</P>
<p><span class="h4">
Effect
</span></p>
<P>
Declares the database objects managed by ABAP accessed in the AMDP procedure or function. The following must be specified after <span class="qtext">USING</span>:
</P>
<ul class="disc">
<li>
All database tables and views from ABAP Dictionary
<br><br></li>
<li>
All procedures and functions managed by AMDP
<br></li>
</ul>
<P>
These tables, views, and procedures are from the current database schema used in the procedure. These
database objects are specified after <span class="qtext">USING</span> and, when used in the procedure,
must be specified directly and without specifying the database schema. An AMDP procedure or function
is specified using the syntax <span class="qtext">class=>meth</span>. Here, <span class="qtext">class</span>
is the name of its AMDP class and <span class="qtext">meth</span> is the name of the AMDP procedure implementation or function implementation.
</P>
<P>
Each database object specified after <span class="qtext">USING</span> must also be used in the procedure
or function. Any database objects other than those above managed by ABAP cannot be specified after <span class="qtext">
USING</span> and the procedure or function cannot be used to access database objects not specified after <span class="qtext">USING</span>, with the following exceptions:
</P>
<ul class="disc">
<li>
Database objects in the current database schema if they are not in the namespace of the
<a href="javascript:call_link('abenname_space_prefix_glosry.html')" class="grey" title="Glossary Entry">namespace prefix</a><span class="qtext400">
/1BCAMDP/</span>. If used in the procedure or function, they must be specified directly and without specifying the database schema.
<br><br></li>
<li>
Database objects in a different database schema using their full qualified names (<a href="javascript:call_link('abenamdp_logical_db_schemas.html')" class="blue">logical database schemas</a> can be used here too).
<br></li>
</ul>
<P>
With the exception of the namespace <span class="qtext400">/1BCAMDP/</span>, database objects from the
current database schema can be accessed in a database procedure or database function managed by AMDP only if they are managed by ABAP and specified after <span class="qtext">USING</span>.
</P>
<p><span class="h4">
Notes
</span></p>
<ul class="disc">
<li>
Explicit declarations of database objects used in the procedure or function are required for various static checks and enable, for example, the visibility of an AMDP method to be passed to the database level.
<br><br></li>
<li>
An object specified after <span class="qtext">USING</span> must be visible here. An AMDP method from
a different class can be specified only if it can be used by the current class and, accordingly, can
only be called in the database procedure or database function. This applies the visibility concept in ABAP Objects to the database system, even if it does not have a similar concept.
<br><br></li>
<li>
In the case of database tables in ABAP Dictionary specified after <span class="qtext">USING</span>,
the AMDP framework makes sure that the order of the fields defined in the dictionary is respected when the tables are accessed statically (this may be different from the order on the database).
<br><br></li>
<li>
When an AMDP method <span class="qtext">class=>meth</span> is specified after <span class="qtext">USING</span>, the ABAP runtime environment identifies this as a use of the class <span class="qtext">class</span> and its
<a href="javascript:call_link('abenstatic_constructor_glosry.html')" class="grey" title="Glossary Entry">static constructor</a>
is executed before the first call of the AMDP method. This means that, if an AMDP procedure or function uses other AMDP procedures or functions, the corresponding static constructor is executed.
<br><br></li>
<li>
AMDP methods in the same class must also be specified after <span class="qtext">USING</span>, if used in the procedure or function.
<br><br></li>
<li>
A database-specific option <span class="qtext">SUPPRESS SYNTAX ERRORS</span> specified after <span class="qtext">OPTIONS</span>
is not applied to the database objects managed by ABAP that are specified after <span class="qtext">USING</span>. The syntax error cannot be suppressed for these.
<br><br></li>
<li>
The namespace <span class="qtext400">/1BCAMDP/</span> is intended for temporary database tables, views, or database procedures of the current database schema accessed in AMDP procedures or functions.
<br><br></li>
<li>
The addition <span class="qtext">USING</span> cannot be specified in the implementation of <a href="javascript:call_link('abenamdp_hdb_l_internal.html')" class="blue">L procedures</a>.
<br></li>
</ul>
<br>
<br>
<!-- POSTFIX --><span class="h4">Continue</span><br>
<a href="javascript:call_link('abenamdp_hdb_sqlscript.html')" class="blue">AMDP - SQL Script for the SAP HANA Database</a><br>
<a href="javascript:call_link('abenamdp_hdb_l_internal.html')" class="blue">AMDP - L for the SAP HANA Database</a><br>
<br>
<br>
</DIV>
<fieldset style="opacity:0">
<input id="url" type="text" />
</fieldset>
</BODY>

<!-- Mirrored from help.sap.com/doc/abapdocu_751_index_htm/7.51/en-US/abapmethod_by_db_proc.htm by HTTrack Website Copier/3.x [XR&CO'2014], Thu, 20 Jan 2022 17:43:31 GMT -->
</html>
