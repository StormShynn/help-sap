<!doctype HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html lang="EN">
<!-- ABAPCALL_FUNCTION_STARTING -->

<!-- Mirrored from help.sap.com/doc/abapdocu_751_index_htm/7.51/en-US/abapcall_function_starting.htm by HTTrack Website Copier/3.x [XR&CO'2014], Thu, 20 Jan 2022 17:46:39 GMT -->
<head>
<meta http-equiv="content-type" content="text/html; charset=utf-8">
<meta name="author" content="SAP">
<meta name="description" content="CALL FUNCTION - STARTING NEW TASK">
<meta name="keywords" content="ABAP, RFC, Asynchronous">
<title>
CALL FUNCTION - STARTING NEW TASK - ABAP Keyword Documentation
</title>
<link rel="icon" href="ABAPIcon.ico" type="image/ico">
<link rel="shortcut icon" href="ABAPIcon.ico">
<LINK rel="stylesheet" href="abap_docu.css" type="text/css">
<script type="text/JavaScript">
function call_link(linked_file)
{
   if(parent.frames.length>0){
     parent.window.frames["basefrm"].window.location = linked_file;
     parent.window.frames["treeframe"].window.location = "abap_docu_tree92bd.html?file=" + linked_file;}
   else {
     window.location = linked_file;}
}
function urlToClipboard(id){
 try{ var loc = top.location.href;}
 catch(e){ alert( "URL cannnot be determined" ); return; }
 var field = document.getElementById(id);
 field.focus();
 if ( loc.search( ".htm" ) == -1 && loc.search( ".HTM" ) == -1  ){ loc = loc + "index.htm"; }
 if (   loc.search( "index.html" ) != -1
     || loc.search( "INDEX-2.html" ) != -1 ){
   var off = loc.search( "file=" );
   if ( off == -1  ){
     field.value = loc + "?file=abapcall_function_starting.htm"; }
   else {
     field.value = loc.substring( 0, off ) + "file=abapcall_function_starting.htm";
   }
 }
 else {
    field.value = loc; }
 field.setSelectionRange(0, field.value.length);
 var r = confirm( "Copy URL to clipboard?\n\n" + field.value + "\n\nCopy to clipboard does not work in all browsers." );
 if (r == true) {
   try{
     document.execCommand("copy");
   }
     catch(e){ alert( "URL could not be copied to clipboard" ); }
 }
 window.scrollTo(0,0);
}
</script>
</head>
<body>
<div class="all">
<p class="copyright">SAP NetWeaver AS ABAP Release 751, &copy;Copyright 2017 SAP AG. All rights reserved.
&nbsp;<input type="button" value="URL" style="font-size:8px; width:26px; height:16px; padding:0"
 onclick="urlToClipboard('url')" title="Copy URL to Clipboard" >
</p>
<span class="path">
<a href="javascript:call_link('abenabap.html')" class="blue">ABAP - Keyword Documentation</a>&nbsp;&rarr;&nbsp;
<a href="javascript:call_link('abenabap_reference.html')" class="blue">ABAP - Reference</a>&nbsp;&rarr;&nbsp;
<a href="javascript:call_link('abenabap_data_communication.html')" class="blue">Data Interfaces and Communication Interfaces</a>&nbsp;&rarr;&nbsp;
<a href="javascript:call_link('abenrfc.html')" class="blue">RFC - Remote Function Call</a>&nbsp;&rarr;&nbsp;
<a href="javascript:call_link('abapcall_function_destination-.html')" class="blue">CALL FUNCTION - RFC</a>&nbsp;&rarr;&nbsp;
</span>
<A NAME="@@STARTING NEW TASK@@CALL FUNCTION@@"></A>
<A NAME="@@DESTINATION@@CALL FUNCTION STARTING NEW TASK@@"></A>
<p><span class="h1">
CALL FUNCTION - STARTING NEW TASK <br><br>
</span></p>
<P>
<a href="javascript:call_link('abapcall_function_shortref.html')" class="blue">Quick Reference</a> <br><br>
</P>
<p><span class="h2">
<span class="bold">Syntax</span>
</span></p>
<P>
<span class="qtext">CALL FUNCTION func STARTING NEW TASK task</span> <br><span class="qtext">&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<i class=bn>[</i>DESTINATION <i class=bn>{</i>dest<i
class=bn>|</i><i class=bn>{</i>IN GROUP <i class=bn>{</i>group<i class=bn>|</i>DEFAULT<i class=bn>}</i><i class=bn>}</i><i class=bn>}</i><i class=bn>]</i></span> <br>
<span class="qtext">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<i
class=bn>[</i><i class=bn>{</i>CALLING meth<i class=bn>}</i><i class=bn>|</i><i class=bn>{</i>PERFORMING subr<i class=bn>}</i> ON END OF TASK<i class=bn>]</i></span> <br>
<span class="qtext">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="javascript:call_link('abapcall_function_starting_para.html')" class="blue">parameter_list</a>.</span> <br><br>
</P>
<p><span class="h3">
Extras:
</span></p>
<P>
   <A HREF="#!ABAP_ADDITION_1@1@" class="blue"> 1. <span class="qtext">... DESTINATION IN GROUP <i class=bn>{</i>group<i class=bn>|</i>DEFAULT<i class=bn>}</i></span> </A> <br>
<br><A HREF="#!ABAP_ADDITION_2@2@" class="blue"> 2. <span class="qtext">... <i class=bn>{</i>CALLING meth<i
class=bn>}</i><i class=bn>|</i><i class=bn>{</i>PERFORMING subr<i class=bn>}</i> ON END OF TASK</span> </A> <br><br>
</P>
<p><span class="h4">
Effect
</span></p>
<P>
Asynchronous call (aRFC) of a <a href="javascript:call_link('abenremote_enabled_fm_glosry.html')" class="grey" title="Glossary Entry">remote-enabled function module</a> specified in <span class="qtext">func</span> using the
<a href="javascript:call_link('abenrfc_interface_glosry.html')" class="grey" title="Glossary Entry">RFC interface</a>. The addition <span class="qtext">DESTINATION</span> is used to specify a single
<a href="javascript:call_link('abenrfc_destination.html')" class="blue">destination</a> in <span class="qtext">dest</span> or use <span class="qtext">IN GROUP</span> to specify a group of
<a href="javascript:call_link('abenapplication_server_glosry.html')" class="grey" title="Glossary Entry">application servers</a>.
The latter supports parallel processing of multiple function modules. The calling program is continued
using the statement <span class="qtext">CALL FUNCTION</span>, as soon as the remotely called function
has been started in the target system, without having to wait for its processing to be finished. Use
<span class="qtext">CALLING</span> and <span class="qtext">PERFORMING</span> to specify callback routines
for the takeover of events when the remotely called function is terminated. <span class="qtext">func</span> and <span class="qtext">dest</span> expect character-like data objects.
</P>
<P>
If the destination is not specified and also not defined in a callback routine using the addition <span class="qtext">
KEEPING TASK</span> of the statement <a href="javascript:call_link('abapreceive.html')" class="blue"><span class="qtext">RECEIVE</span></a>,
the destination <span class="qtext400">"NONE"</span> is used implicitly. The asynchronous RFC does not support communication with external systems or programs written in other programming languages.
</P>
<P>
A character-like data object must be specified for <span class="qtext">task</span>. This object must
contain a freely definable task ID with a maximum of 32 digits for the remotely called function module.
This task ID is passed to the callback routines to identify the function. Each task ID defines a separate RFC connection with a dedicated
<a href="javascript:call_link('abenrfc_session_glosry.html')" class="grey" title="Glossary Entry">RFC session</a>.
</P>
<ul class="disc">
<li>
If a callback routine is specified, it must be ended before another function module is called with the same task ID and destination.
<br><br></li>
<li>
A repeated function call with the same task ID and destination uses the same RFC session in which the global data of the associated function group can be accessed (if the connection still exists). This is only the case
<br></li>
</ul>
<ul class="circlem2">
<li>if the <span class="qtext">PERFORMING</span> addition or the <span class="qtext">CALLING</span> addition are used and</li>
</ul>
<ul class="circlem2">
<li>the addition <span class="qtext">KEEPING TASK</span> of the statement <a href="javascript:call_link('abapreceive.html')" class="blue"><span class="qtext">RECEIVE</span></a> is specified in the callback routine.</li>
</ul>
<ul class="disc">
<li>
In all other cases, a new RFC session is usually opened for function modules called more than once. This is the case
<br></li>
</ul>
<ul class="circlem2">
<li>if the task ID or destination is different (even if the connection still exists) and</li>
</ul>
<ul class="circlem2">
<li>if no callback routine is specified using the <span class="qtext">PERFORMING</span> addition or
the <span class="qtext">CALLING</span> addition or if the statement <a href="javascript:call_link('abapreceive.html')" class="blue"><span class="qtext">
RECEIVE</span></a> is used without the addition <span class="qtext">KEEPING TASK</span> in a callback routine. In these cases, the RFC connection is closed again directly after the call.</li>
</ul>
<P>
If a callback routine is specified, it must be ended before another function module is called with the same task ID and destination. If not, the call raises an exception.
</P>
<P>
<span class="bold">More Information</span>
</P>
<P>
More information about aRFC can be found in the
</P>
<p>
<span class="lnkgrey">RFC</span> documentation on <a href="http://help.sap.com/" target="blank" class="blue">SAP Help Portal</a>.
</p>
<p><span class="h4">
Notes
</span></p>
<ul class="disc">
<li>
As with every RFC, an asynchronous RFC opens a <a href="javascript:call_link('abenuser_session_glosry.html')" class="grey" title="Glossary Entry">
user session</a>. If a calling program raises multiple consecutive asynchronous RFCs with different
destinations or task IDs or if a connection no longer exists, the called function modules are processed
in parallel in different user sessions automatically. This property can be exploited when running applications
in parallel. Since the associated management tool can cause resource bottlenecks on both the client
and the server, this kind of parallel processing is only recommended using the addition <span class="qtext">DESTINATION IN GROUP</span>. <br>
<br></li>
<li>
If a function module is started multiple times in a row using asynchronous RFC, the order of execution is not fixed; instead it depends in the system availability. <br>
<br></li>
<li>
When dynpros are called in aRFC processing, additional
<a href="javascript:call_link('abenmain_session_glosry.html')" class="grey" title="Glossary Entry">ABAP sessions</a> are opened in the RFC client (see also
<a href="javascript:call_link('abenrfc_dialog.html')" class="blue">RFC Dialog Interactions</a>. The maximum number of ABAP sessions
cannot be exceeded and if there are more, an error message is displayed. The maximum number of sessions
is defined in the profile parameter <span class="lnkgrey">rdisp/max_alt_modes</span> and cannot be greater than 16. <br>
<br></li>
<li>
Asynchronous RFC triggers a <a href="javascript:call_link('abendatabase_commit_glosry.html')" class="grey" title="Glossary Entry">database commit</a> in the calling program. An sRFC in
<a href="javascript:call_link('abenupdate_glosry.html')" class="grey" title="Glossary Entry">updates</a> is an exception to this. <br>
<br></li>
<li>
Calls using <span class="qtext">STARTING NEW TASK</span> are always executed using the RFC interface and a destination specified as <span class="qtext">dest</span> is always interpreted accordingly. This is why, unlike in
<a href="javascript:call_link('abapcall_function_destination.html')" class="blue">synchronous RFC</a>, initial string or text fields containing only blanks cannot be specified for <span class="qtext">dest</span>. <br>
<br></li>
<li>
The task ID passed as <span class="qtext">task</span> does not need to be unique for each call. Unique tasks IDs can, however, help to identify calls within a callback routine. <br>
<br></li>
<li>
If by mistake the statement <a href="javascript:call_link('abapreceive.html')" class="blue"><span class="qtext">RECEIVE</span></a>
is not used in a callback routine specified using the <span class="qtext">PERFORMING</span> addition
or the <span class="qtext">CALLING</span> addition, the connection is persisted as when <span class="qtext">RECEIVE</span> is specified using the addition <span class="qtext">KEEPING TASK</span>. <br><br>
<br></li>
</ul>
<A NAME="@@IN GROUP@@CALL FUNCTION STARTING NEW TASK@@"></A>
<A NAME="@@DEFAULT@@CALL FUNCTION STARTING NEW TASK@@"></A>
<p><span class="h3">
<A NAME="!ABAP_ADDITION_1@1@"></A> <span class="bold">Addition 1</span>
</span></p>
<P>
<span class="qtext">... DESTINATION IN GROUP <i class=bn>{</i>group<i class=bn>|</i>DEFAULT<i class=bn>}</i></span>   <br><!-- /A -->
</P>
<p><span class="h4">
Effect
</span></p>
<P>
If <span class="qtext">IN GROUP</span> is specified as the
<a href="javascript:call_link('abendestination_glosry.html')" class="grey" title="Glossary Entry">destination</a>, this supports parallel execution of multiple function modules on a predefined group of application servers of the current
<a href="javascript:call_link('abensap_nw_abap_glosry.html')" class="grey" title="Glossary Entry">AS ABAP</a>. This variant of aRFC is also known as parallel remote function call (pRFC).
</P>
<P>
<span class="qtext"> group</span> expects a data object of the type  RZLLI_APCL from ABAP Dictionary,
either an initial objects or one that includes the name of an RFC server group created in transaction
<span class="lnkgrey">RZ12</span>. If <span class="qtext">DEFAULT</span> is specified or if <span class="qtext">group</span>
is initial, all currently available application servers of the current AS ABAP are used as the group.
Only one RFC server group may be used within a program. The first asynchronous RFC using the addition
<span class="qtext"> IN GROUP</span> initializes the specified RFC server group. For each asynchronous
RFC where the group is specified, the most suitable application server is determined automatically, and the called function module is executed on this.
</P>
<P>
If the function module cannot be executed on any of the application servers, because not enough resources are available at present, a predefined exception RESOURCE_FAILURE is raised, to which, in addition to the other
<a href="javascript:call_link('abenrfc_exception.html')" class="blue">RFC exceptions</a>, a return code can be assigned. For this exception, the addition <span class="qtext"> MESSAGE</span> is not permitted.
</P>
<p><span class="h4">
Notes
</span></p>
<ul class="disc">
<li>
The parallel processing of function modules with the addition <span class="qtext">IN GROUP</span> makes
optimal use of the available resources and is preferable to self-programmed parallel processing with explicitly specified destinations.
<br><br></li>
<li>
An application server that is used as part of an RFC server group for parallel processing must have
at least three dialog work processes, of which one is currently free. Other resources, such as requests in the queue, the number of system messages and so on, are also respected and must not exceed certain
<a href="javascript:call_link('abenapp_server_resources.html')" class="blue">threshold values</a>.
<br><br></li>
<li>
To ensure that only those application servers that have enough resources are accessed, it is preferable
work with explicitly defined RFC server groups instead of working with the addition <span class="qtext"> DEFAULT</span>.
<br><br></li>
<li>
The function modules of the function group SPBT provide service functions for parallel processing, for
example, initialization of RFC server groups, determining the used destination, or temporarily removing an application server from an RFC server group. <br><br>
<br></li>
</ul>
<A NAME="@@PERFORMING@@CALL FUNCTION STARTING NEW TASK@@"></A>
<A NAME="@@CALLING@@CALL FUNCTION STARTING NEW TASK@@"></A>
<A NAME="@@ON END OF TASK@@CALL FUNCTION STARTING NEW TASK@@"></A>
<p><span class="h3">
<A NAME="!ABAP_ADDITION_2@2@"></A> <span class="bold">Addition 2</span>
</span></p>
<P>
<span class="qtext">... <i class=bn>{</i>CALLING meth<i class=bn>}</i><i class=bn>|</i><i class=bn>{</i>PERFORMING subr<i class=bn>}</i> ON END OF TASK</span>   <br><!-- /A -->
</P>
<p><span class="h4">
Effect
</span></p>
<P>
This addition is used to specify either a method <span class="qtext">meth</span> or a subroutine <span class="qtext">
subr</span> as the callback routine registered to be executed after terminating the asynchronously called function module. The same information can be specified for <span class="qtext">meth</span> as for the general
<a href="javascript:call_link('abenmethod_calls.html')" class="blue">method call</a>, in particular dynamic information. <span class="qtext">subr</span> expects a subroutine of the same program to be specified statically.
</P>
<P>
The method <span class="qtext"> meth</span> must be
<a href="javascript:call_link('abenpublic_glosry.html')" class="grey" title="Glossary Entry">public</a>, and can have only one non-optional input parameter <span class="qtext">p_task</span> of type <span class="qtext">clike</span>. The specified
<a href="javascript:call_link('abapform.html')" class="blue">subroutine</a> <span class="qtext">subr</span> can have exactly
one <span class="qtext">USING</span> parameter of the type <span class="qtext">clike</span>. In the
call, the RFC interface fills this parameter with the task ID of the remotely called function specified in the call in <span class="qtext">task</span>.
</P>
<P>
In the method <span class="qtext">meth</span> or in the subroutine <span class="qtext">subr</span>,
the statement <a href="javascript:call_link('abapreceive.html')" class="blue"><span class="qtext">RECEIVE</span></a> must be
used to receive the results of the remote function. In the callback routine, no statements can be executed that interrupt the routine or that trigger an implicit
<a href="javascript:call_link('abendatabase_commit_glosry.html')" class="grey" title="Glossary Entry">database commit</a>. Class-based exceptions must be handled within the callback routine. Statements for
<a href="javascript:call_link('abenlist_glosry.html')" class="grey" title="Glossary Entry">list output</a> are not executed.
</P>
<P>
A prerequisite for the execution of a registered callback routine is that the calling program still exists in its
<a href="javascript:call_link('abeninternal_session_glosry.html')" class="grey" title="Glossary Entry">internal session</a> when the remote function is terminated. It is then executed here at the next change of the
<a href="javascript:call_link('abenwork_process_glosry.html')" class="grey" title="Glossary Entry">work process</a> in a roll-in. If the program was terminated or is located on the stack as part of a
<a href="javascript:call_link('abencall_sequence_glosry.html')" class="grey" title="Glossary Entry">call sequence</a>, the callback routine is not executed.
</P>
<P>
If multiple callback routines are registered during a program section, they are executed in an undefined
order when the work process changes in a roll-in. The statement <a href="javascript:call_link('abapwait_until.html')" class="blue"><span class="qtext">
WAIT FOR ASYNCHRONOUS TASKS</span></a> can be used to stop the program execution until certain or all callback routines have been executed.
</P>
<p><span class="h4">
Notes
</span></p>
<ul class="disc">
<li>
If no <span class="qtext">RECEIVE</span> statement is executed in the callback routine to receive the
result of the remote function, the connection remains intact and implicitly behaves like the statement
<a href="javascript:call_link('abapreceive.html')" class="blue"><span class="qtext">RECEIVE</span></a> with the addition <span class="qtext">
KEEPING TASK</span>. This implicit behavior is usually unwanted and a callback routine without a <span class="qtext">RECEIVE</span> statement must be viewed as a programming error.
<br><br></li>
<li>
The time when the callback routines are executed can be programmed explicitly or be reached implicitly:
<br></li>
</ul>
<ul class="circlem2">
<li>The statement <a href="javascript:call_link('abapwait_until.html')" class="blue"><span class="qtext">WAIT FOR ASYNCHRONOUS
TASKS</span></a> is used for explicit programming. As specified by a condition, this statement changes
the work process and hence executes the callback routines registered up to this time. It waits for as
many registered routines to end until the condition is met (the maximum wait time can be restricted).
Explicit programming is recommended whenever the results of the remote function are required in the current program.</li>
</ul>
<ul class="circlem2">
<li>If the results of the remote function are not required in the current program, the time at which the callback routines are executed can also be determined by an implicit change of the work process (for example, at the end of a
<a href="javascript:call_link('abendialog_step_glosry.html')" class="grey" title="Glossary Entry">dialog step</a>). This can
be a good idea, for example, in GUI scenarios in which uses of <span class="qtext">WAIT</span> are not
wanted. In this case, it must be ensured that the work process changes before the program is ended.
There is also a risk that, if the work process is changed implicitly, not all callback routines are registered in time.</li>
</ul>
<br>
<br>
<!-- POSTFIX --><span class="h4">Continue</span><br>
<a href="javascript:call_link('abapcall_function_starting_para.html')" class="blue">CALL FUNCTION - STARTING NEW TASK parameter_list</a><br>
<a href="javascript:call_link('abapreceive.html')" class="blue">RECEIVE</a><br>
<a href="javascript:call_link('abapwait_until.html')" class="blue">WAIT FOR ASYNCHRONOUS TASKS</a><br>
<a href="javascript:call_link('abenapp_server_resources.html')" class="blue">Thresholds for Resource Allocation for Asynchronous RFC</a><br>
<br>
<br>
</DIV>
<fieldset style="opacity:0">
<input id="url" type="text" />
</fieldset>
</BODY>

<!-- Mirrored from help.sap.com/doc/abapdocu_751_index_htm/7.51/en-US/abapcall_function_starting.htm by HTTrack Website Copier/3.x [XR&CO'2014], Thu, 20 Jan 2022 17:46:39 GMT -->
</html>
