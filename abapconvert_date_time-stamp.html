<!doctype HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html lang="EN">
<!-- ABAPCONVERT_DATE_TIME-STAMP -->

<!-- Mirrored from help.sap.com/doc/abapdocu_751_index_htm/7.51/en-US/abapconvert_date_time-stamp.htm by HTTrack Website Copier/3.x [XR&CO'2014], Thu, 20 Jan 2022 17:40:40 GMT -->
<head>
<meta http-equiv="content-type" content="text/html; charset=utf-8">
<meta name="author" content="SAP">
<meta name="description" content="CONVERT INTO TIME STAMP">
<meta name="keywords" content="ABAP, CONVERT INTO TIME STAMP">
<title>
CONVERT INTO TIME STAMP - ABAP Keyword Documentation
</title>
<link rel="icon" href="ABAPIcon.ico" type="image/ico">
<link rel="shortcut icon" href="ABAPIcon.ico">
<LINK rel="stylesheet" href="abap_docu.css" type="text/css">
<script type="text/JavaScript">
function call_link(linked_file)
{
   if(parent.frames.length>0){
     parent.window.frames["basefrm"].window.location = linked_file;
     parent.window.frames["treeframe"].window.location = "abap_docu_tree92bd.html?file=" + linked_file;}
   else {
     window.location = linked_file;}
}
function urlToClipboard(id){
 try{ var loc = top.location.href;}
 catch(e){ alert( "URL cannnot be determined" ); return; }
 var field = document.getElementById(id);
 field.focus();
 if ( loc.search( ".htm" ) == -1 && loc.search( ".HTM" ) == -1  ){ loc = loc + "index.htm"; }
 if (   loc.search( "index.html" ) != -1
     || loc.search( "INDEX-2.html" ) != -1 ){
   var off = loc.search( "file=" );
   if ( off == -1  ){
     field.value = loc + "?file=abapconvert_date_time-stamp.htm"; }
   else {
     field.value = loc.substring( 0, off ) + "file=abapconvert_date_time-stamp.htm";
   }
 }
 else {
    field.value = loc; }
 field.setSelectionRange(0, field.value.length);
 var r = confirm( "Copy URL to clipboard?\n\n" + field.value + "\n\nCopy to clipboard does not work in all browsers." );
 if (r == true) {
   try{
     document.execCommand("copy");
   }
     catch(e){ alert( "URL could not be copied to clipboard" ); }
 }
 window.scrollTo(0,0);
}
</script>
</head>
<body>
<div class="all">
<p class="copyright">SAP NetWeaver AS ABAP Release 751, &copy;Copyright 2017 SAP AG. All rights reserved.
&nbsp;<input type="button" value="URL" style="font-size:8px; width:26px; height:16px; padding:0"
 onclick="urlToClipboard('url')" title="Copy URL to Clipboard" >
</p>
<span class="path">
<a href="javascript:call_link('abenabap.html')" class="blue">ABAP - Keyword Documentation</a>&nbsp;&rarr;&nbsp;
<a href="javascript:call_link('abenabap_reference.html')" class="blue">ABAP - Reference</a>&nbsp;&rarr;&nbsp;
<a href="javascript:call_link('abenabap_data_working.html')" class="blue">Processing Internal Data</a>&nbsp;&rarr;&nbsp;
<a href="javascript:call_link('abendate_time_processing.html')" class="blue">Date and Time Processing</a>&nbsp;&rarr;&nbsp;
<a href="javascript:call_link('abentime_stamps.html')" class="blue">Time Stamp</a>&nbsp;&rarr;&nbsp;
</span>
<A NAME="@@CONVERT INTO TIME STAMP@@!ABAP_STATEMENT!@@"></A>
<A NAME="@@DATE@@CONVERT INTO TIME STAMP@@"></A>
<A NAME="@@TIME@@CONVERT INTO TIME STAMP@@"></A>
<A NAME="@@TIME ZONE@@CONVERT INTO TIME STAMP@@"></A>
<A NAME="@@DAYLIGHT SAVING TIME@@CONVERT INTO TIME STAMP@@"></A>
<p><span class="h1">
CONVERT INTO TIME STAMP <br><br>
</span></p>
<P>
<a href="javascript:call_link('abapconvert_time_stamp_shortref.html')" class="blue">Quick Reference</a> <br><br>
</P>
<p><span class="h2">
<span class="bold">Syntax</span>
</span></p>
<P>
<span class="qtext">CONVERT DATE dat <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<i class=bn>[</i>TIME tim <i class=bn>[</i>DAYLIGHT SAVING TIME dst<i class=bn>]</i><i class=bn>]</i> <br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;INTO TIME STAMP time_stamp TIME ZONE tz.</span> <br><br>
</P>
<p><span class="h4">
Effect
</span></p>
<P>
This statements converts a date specified in <span class="qtext">dat</span>, a time specified in <span class="qtext">
tim</span>, and a summer time marker specified in <span class="qtext">dst</span> from the time zone specified in <span class="qtext">tz</span> into a
<a href="javascript:call_link('abentime_stamp_oview.html')" class="blue">time stamp</a> and maps the result to the variable <span class="qtext">time_stamp</span>.
</P>
<P>
<span class="qtext">dat</span>, <span class="qtext">tim</span>, <span class="qtext">dst</span>, and <span class="qtext">tz</span> are
<a href="javascript:call_link('abenfunctional_position_glosry.html')" class="grey" title="Glossary Entry">functional operand positions</a>.
</P>
<ul class="disc">
<li>
<span class="qtext">dat</span> expects a data object of the type <span class="qtext">d</span> containing a valid date. Operands of other types are converted to <span class="qtext">d</span>. If <span class="qtext">dat</span> contains an
<a href="javascript:call_link('abenchar_date_time_fields_validity.html')" class="blue">invalid value</a>, <span class="qtext">time_stamp</span> is not changed and <span class="qtext">sy-subrc</span> is set to 12.
<br><br></li>
<li>
<span class="qtext">tim</span> expects a data object of the type <span class="qtext">t</span> containing
a valid time. Operands of other types are converted to <span class="qtext">t</span>. If the <span class="qtext">TIME</span>
addition is not specified, the system implicitly uses the initial time "000000" for <span class="qtext">tim</span>.
In <span class="qtext">tim</span>, only the values 00 to 23 for the hours, and 00 to 59 for the minutes are valid. If <span class="qtext">tim</span> contains an
<a href="javascript:call_link('abenchar_date_time_fields_validity.html')" class="blue">invalid value</a>, <span class="qtext">time_stamp</span> is not changed and <span class="qtext">sy-subrc</span> is set to 12.
<br><br></li>
<li>
<span class="qtext">dst</span> can be specified as a data object of the type <span class="qtext">c</span>
with length 1 containing the value "X" or " ". This controls the behavior of the statement with respect to summer time.
<br></li>
</ul>
<ul class="circlem2">
<li>If <span class="qtext">dst</span> has the value "X", the value of <span class="qtext">tim</span> is applied as the specified time in daylight saving time.</li>
</ul>
<ul class="circlem2">
<li>If <span class="qtext">dst</span> has the value "X", the value of <span class="qtext">tim</span> is applied as the specified time in winter time.</li>
</ul>
<dl>

<dd>
If the time zone specified in <span class="qtext">tz</span> does not have a summer time rule (for example
when <span class="qtext400">"UTC"</span> is specified), the addition <span class="qtext">DAYLIGHT SAVING
TIME</span> is ignored. If the addition <span class="qtext">DAYLIGHT SAVING TIME</span> is not specified,
the value of <span class="qtext">dst</span> is set to "X" implicitly if the data in <span class="qtext">tim</span>
and <span class="qtext">dat</span> is in summer time and is set to " " for data in winter time. In the
extra hour that is caused by switching from summer time to winter time, <span class="qtext">tim</span>
and <span class="qtext">dat</span> are interpreted as a time in summer time and <span class="qtext">dst</span>
is set to the value "X". If the value in <span class="qtext">dst</span> does not match the data in <span class="qtext">
tim</span> and <span class="qtext">dat</span> (that is, if the value "X" is specified in winter time
and the value " " in summer time, <span class="qtext">time_stamp</span> is not changed and <span class="qtext">sy-subrc</span> is set to 12.
</dd>
</dl>
<ul class="disc">
<li>
<span class="qtext">tz</span> expects a character-like data object containing a
<a href="javascript:call_link('abentime_zone_glosry.html')" class="grey" title="Glossary Entry">time zone</a> from the database table <span class="lnkgrey">TTZZ</span>.
<br></li>
</ul>
<ul class="circlem2">
<li>If <span class="qtext">tz</span> is initial, the time zone is set implicitly to "UTC", <span class="qtext">time_stamp</span> is given the appropriate data, and <span class="qtext">sy-subrc</span> is set to 4.</li>
</ul>
<ul class="circlem2">
<li>If the specified time zone is not found in the database table TTZZ, <span class="qtext">time_stamp</span> remains unchanged and <span class="qtext">sy-subrc</span> is set to 8.</li>
</ul>
<ul class="circlem2">
<li>If the <a href="javascript:call_link('abentime_zone_rules.html')" class="blue">rule set</a> for the specified time zone is incomplete, a non-handleable exception is raised.</li>
</ul>
<P>
The following can be specified for <span class="qtext">time_stamp</span>:
</P>
<ul class="disc">
<li>
An existing variable of the data type <span class="lnkgrey">TIMESTAMP</span> or <span class="lnkgrey">TIMESTAMPL</span>
from ABAP Dictionary, in accordance with ABAP type <span class="qtext">p</span> with length 8 or <span class="qtext">
p</span> with length 11, with seven decimal places. If <span class="qtext">time_stamp</span> has the data type TIMESTAMPL for the
<a href="javascript:call_link('abentime_stamp_oview.html')" class="blue">long form</a>, the seconds fractions in the decimal places are initialized when the assignment is made.
<br><br></li>
<li>
An inline declaration <a href="javascript:call_link('abendata_inline.html')" class="blue"><span class="qtext">DATA(var)</span></a>, where a variable of type <span class="lnkgrey">TIMESTAMP</span> is declared.
<br></li>
</ul>
<P>
When dates are converted to reflect the conversion from the Julian calendar to the Gregorian calendar
and the non-existence of the days between 19/5/1582 and 10/14/1582, this returns the same results as the conversion for the days from 10/15/1582 to 10/24/1582 (which do exist).
</P>
<P>
If <span class="qtext">dat</span> and <span class="qtext">tim</span> contain valid values but produce
an invalid time stamp when combined with a valid time zone in <span class="qtext">tz</span>, <span class="qtext">time_stamp</span> is not modified and <span class="qtext">sy-subrc</span> is set to 12.
</P>
<P>
<span class="bold">System Fields</span>
</P>
<table border>
<tr>
<td><span class="qtext">sy-subrc</span></td>
<td><span class="bold">Meaning</span></td>
</tr>
<tr>
<td>0</td>
<td>Local time of specified time zone was converted to time stamp and assigned to the target field</td>
</tr>
<tr>
<td>4</td>
<td>The specified time was converted to a time stamp without time shift and assigned to the target field.</td>
</tr>
<tr>
<td>8</td>
<td>The specified time could not be converted, because the specified time zone is not in the database table TTZZ</td>
</tr>
<tr>
<td>12</td>
<td>The specified time could not be converted, because <span class="qtext">dat</span>, <span class="qtext">tim</span>, or <span class="qtext">dst</span> contain invalid or inconsistent values.</td>
</tr>
</table><br>
<p><span class="h4">
Notes
</span></p>
<ul class="disc">
<li>
Current user-specific local times and the corresponding local time zones are stored in the system fields
<a href="javascript:call_link('abentime_system_fields.html')" class="blue"><span class="qtext">sy-datlo</span></a>, <a href="javascript:call_link('abentime_system_fields.html')" class="blue">
<span class="qtext">sy-timlo</span></a>, and <a href="javascript:call_link('abentime_system_fields.html')" class="blue"><span class="qtext">sy-zonlo</span></a>.
<br><br></li>
<li>
Specifying daylight saving time and winter time after <span class="qtext">DAYLIGHT SAVING TIME</span>
enables different UTC time stamps to be created from matching local time stamps within the extra hour when switching from daylight saving time to winter time.
<br><br></li>
<li>
When the switch is made from winter to daylight saving time, an hour is lost. For example, in the <span class="qtext400">
"CET"</span> time zone in the year 2009, on March 29, the hour between 02:00 and 03:00 does not exist.
If an attempt is made to convert a time during this missing hour, the statement is always terminated with the value 12 for <span class="qtext">sy-subrc</span> because this time or this local time stamp does not exist.
<br><br></li>
<li>
Usually, an invalid time stamp can be created from a valid date and time only by combining the first valid date 00010101 with time zones east of UTC or the last valid date 99991231 with time zones west of UTC. <br><br>
<br></li>
</ul>
<p><span class="h4">
Example
</span></p>
<P>
For the time zone <span class="qtext400">"EST"</span>, the settings apply that are described in the
example for <a href="javascript:call_link('abapconvert_time-stamp.html')" class="blue"><span class="qtext">CONVERT TIME STAMP</span></a>
in the rule set for time stamps. By specifying the daylight saving and winter time, two different UTC
time stamps "20161030053000" and "20161030063000" are created from one specified local time. Without the addition <span class="qtext">DAYLIGHT SAVING TIME</span>, the UTC time stamp "20161030053000" is created.
</P>
<p class="qtextml1">
<span class="qtext">
DATA: dat TYPE d, <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;tim TYPE t, <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;tz&nbsp;&nbsp;TYPE ttzz-tzone. <br>
 <br>tz = 'EST'. <br>dat = '20161030'. <br>tim = '013000'. <br> <br>CONVERT DATE dat TIME tim DAYLIGHT SAVING TIME 'X' <br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;INTO TIME STAMP DATA(time_stamp) TIME ZONE tz. <br>cl_demo_output=>write_data( time_stamp ). <br>
 <br>CONVERT DATE dat TIME tim DAYLIGHT SAVING TIME ' ' <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;INTO TIME STAMP time_stamp TIME ZONE tz. <br>
cl_demo_output=>write_data( time_stamp ). <br> <br>cl_demo_output=>display( ). <br><br>
</span>
</p>
<p><span class="h4">
<a href="javascript:call_link('abenabap_language_exceptions.html')" class="blue">Exceptions</a>
</span></p>
<P>
<span class="bold">Non-Handleable Exceptions</span> <br><br>
</P>
<ul class="disc">
<li>
<span class="italic">Cause:</span> Inconsistent control tables for the conversion. <br><span class="italic">Runtime error:</span> <span class="qtext">CONVERT_TSTMP_INCONSISTENT_TAB</span> <br><br>
<br></li>
</ul>
<br>
<br>
<br>
<br>
</DIV>
<fieldset style="opacity:0">
<input id="url" type="text" />
</fieldset>
</BODY>

<!-- Mirrored from help.sap.com/doc/abapdocu_751_index_htm/7.51/en-US/abapconvert_date_time-stamp.htm by HTTrack Website Copier/3.x [XR&CO'2014], Thu, 20 Jan 2022 17:40:40 GMT -->
</html>
